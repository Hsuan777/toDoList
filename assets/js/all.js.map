{"version":3,"sources":["all.js"],"names":["firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebase","initializeApp","db","database","app","Vue","createApp","data","toDoList","toDo","hasLogin","uid","nullKey","methods","getData","vm","ref","on","snapshot","val","postData","trim","key","push","child","set","date","Date","getTime","deleteData","remove","deleteAll","googleLogin","provider","auth","GoogleAuthProvider","signInWithPopup","then","result","onAuthState","facebookLogin","FacebookAuthProvider","addScope","setCustomParameters","token","credential","accessToken","FBUser","user","console","log","signOut","alert","onAuthStateChanged","cleanData","mounted","mount"],"mappings":"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","file":"all.js","sourcesContent":["// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDQv3-yDg_Fu6UVZYz9YWMbh3ka1m8NwiA\",\n  authDomain: \"webtest2-c2d0c.firebaseapp.com\",\n  databaseURL: \"https://webtest2-c2d0c-default-rtdb.firebaseio.com\",\n  projectId: \"webtest2-c2d0c\",\n  storageBucket: \"webtest2-c2d0c.appspot.com\",\n  messagingSenderId: \"1003425564921\",\n  appId: \"1:1003425564921:web:31710ac40e85a41bbbba28\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\n// firebase 資料庫\nconst db = firebase.database();\n\n// Vue\nconst app = Vue.createApp({\n  data() {\n    return {\n      toDoList: {},\n      toDo: '',\n      hasLogin: false,\n      uid: '',\n      nullKey: '',\n    }\n  },\n  methods: {\n    getData() {\n      const vm = this;\n      // 取得屬性值\n      db.ref(`${vm.uid}`).on('value', (snapshot) => {\n        vm.toDoList = snapshot.val() || {};\n      })\n    },\n    postData() {\n      if (!this.toDo.trim()) {\n        return;\n      }\n      // 取得推送亂數 ID\n      const key = db.ref(`${this.uid}`).push().key;\n\n      // 推送，在子層建立資料\n      db.ref(`${this.uid}`).child(key).set({\n        // 加入相同 key 值，方便刪除\n        key: key,\n        toDo: this.toDo,\n        date: new Date().getTime(),\n      })\n      this.toDo = '';\n    },\n    deleteData(key) {\n      db.ref(`${this.uid}`).child(key).remove();\n    },\n    deleteAll() {\n      db.ref(`${this.uid}`).remove();\n    },\n    // google 登入\n    googleLogin() {\n      const provider = new firebase.auth.GoogleAuthProvider();\n      const vm = this;\n      firebase.auth().signInWithPopup(provider).then(function (result) {\n        // 可以獲得 Google 提供 token，token可透過 Google API 獲得其他數據。\n        // const credential = result.credential;\n        // const token = result.credential.accessToken;\n        // const user = result.user;\n        vm.onAuthState();\n      });\n    },\n    facebookLogin() {\n      const provider = new firebase.auth.FacebookAuthProvider();\n      const vm = this;\n      provider.addScope('user_birthday');\n      provider.setCustomParameters({\n        'display': 'popup'\n      }); \n      firebase.auth().signInWithPopup(provider).then(function(result) {\n        // 取得FB Token，可以使用於FB API中\n        const token = result.credential.accessToken;\n        // 使用者資料\n        const FBUser = result.user;\n        console.log(FBUser);\n        vm.onAuthState();\n      })\n    },\n    // 登出\n    signOut() {\n      firebase.auth().signOut().then(() => {\n        this.onAuthState();\n        alert('已登出');\n      })\n    },\n    // 監聽登入狀態\n    onAuthState() {\n      const vm = this;\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          console.log(\"User is logined\")\n          vm.hasLogin = true;\n          vm.uid = user.uid;\n          vm.getData();\n        } else {\n          console.log(\"User is not logined yet.\");\n          vm.cleanData();\n        }\n      });\n    },\n    cleanData() {\n      this.hasLogin = false;\n      this.toDoList = {};\n      this.uid = '';\n    },\n  },\n  mounted() {\n    this.onAuthState();\n  },\n}).mount('#app');"]}