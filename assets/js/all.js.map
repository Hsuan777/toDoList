{"version":3,"sources":["all.js"],"names":["firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebase","initializeApp","db","database","app","Vue","createApp","data","toDoList","toDo","hasLogin","uid","totalTime","seconds","minutes","countDown","started","percent","methods","getData","vm","ref","on","snapshot","val","postData","trim","key","push","child","set","date","Date","getTime","deleteData","remove","deleteAll","googleLogin","provider","auth","GoogleAuthProvider","signInWithPopup","then","result","onAuthState","facebookLogin","FacebookAuthProvider","addScope","setCustomParameters","token","credential","accessToken","FBUser","user","console","log","signOut","alert","onAuthStateChanged","cleanData","start","setInterval","clearInterval","stop","reStart","formatTime","num","computed","timeLeft","min","Math","floor","sec","watch","newValue","mounted","mount"],"mappings":"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","file":"all.js","sourcesContent":["// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDQv3-yDg_Fu6UVZYz9YWMbh3ka1m8NwiA\",\n  authDomain: \"webtest2-c2d0c.firebaseapp.com\",\n  databaseURL: \"https://webtest2-c2d0c-default-rtdb.firebaseio.com\",\n  projectId: \"webtest2-c2d0c\",\n  storageBucket: \"webtest2-c2d0c.appspot.com\",\n  messagingSenderId: \"1003425564921\",\n  appId: \"1:1003425564921:web:31710ac40e85a41bbbba28\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\n// firebase 資料庫\nconst db = firebase.database();\n\n// Vue\nconst app = Vue.createApp({\n  data() {\n    return {\n      toDoList: {},\n      toDo: '',\n      hasLogin: false,\n      uid: '',\n      totalTime: 0,\n      seconds: 60,\n      minutes : 25,\n      countDown: null,\n      started: false,\n      percent: 0,\n    }\n  },\n  methods: {\n    getData() {\n      const vm = this;\n      // 取得屬性值\n      db.ref(`${vm.uid}`).on('value', (snapshot) => {\n        vm.toDoList = snapshot.val() || {};\n      })\n    },\n    postData() {\n      if (!this.toDo.trim()) {\n        return;\n      }\n      // 取得推送亂數 ID\n      const key = db.ref(`${this.uid}`).push().key;\n\n      // 推送，在子層建立資料\n      db.ref(`${this.uid}`).child(key).set({\n        // 加入相同 key 值，方便刪除\n        key: key,\n        toDo: this.toDo,\n        date: new Date().getTime(),\n      })\n      this.toDo = '';\n    },\n    deleteData(key) {\n      db.ref(`${this.uid}`).child(key).remove();\n    },\n    deleteAll() {\n      db.ref(`${this.uid}`).remove();\n    },\n    // google 登入\n    googleLogin() {\n      const provider = new firebase.auth.GoogleAuthProvider();\n      const vm = this;\n      firebase.auth().signInWithPopup(provider).then(function (result) {\n        // 可以獲得 Google 提供 token，token可透過 Google API 獲得其他數據。\n        // const credential = result.credential;\n        // const token = result.credential.accessToken;\n        // const user = result.user;\n        vm.onAuthState();\n      });\n    },\n    facebookLogin() {\n      const provider = new firebase.auth.FacebookAuthProvider();\n      const vm = this;\n      provider.addScope('user_birthday');\n      provider.setCustomParameters({\n        'display': 'popup'\n      }); \n      firebase.auth().signInWithPopup(provider).then(function(result) {\n        // 取得FB Token，可以使用於FB API中\n        const token = result.credential.accessToken;\n        // 使用者資料\n        const FBUser = result.user;\n        console.log(FBUser);\n        vm.onAuthState();\n      })\n    },\n    // 登出\n    signOut() {\n      firebase.auth().signOut().then(() => {\n        this.onAuthState();\n        alert('已登出');\n      })\n    },\n    // 監聽登入狀態\n    onAuthState() {\n      const vm = this;\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          console.log(\"User is logined\")\n          vm.hasLogin = true;\n          vm.uid = user.uid;\n          vm.getData();\n        } else {\n          console.log(\"User is not logined yet.\");\n          vm.cleanData();\n        }\n      });\n    },\n    cleanData() {\n      this.hasLogin = false;\n      this.toDoList = {};\n      this.uid = '';\n    },\n    start() {\n      this.started = true;\n      this.countDown = setInterval(() => {\n        this.totalTime -= 1;\n        if (this.totalTime === 0) {\n          clearInterval(this.countDown);\n        }\n      }, 1000);\n    },\n    stop() {\n      this.started = false;\n      clearInterval(this.countDown);\n    },\n    reStart() {\n      this.started = false;\n      this.totalTime = this.minutes * this.seconds;\n      clearInterval(this.countDown);\n    },\n    formatTime(num) {\n      if (num < 10) {\n        return '0' + num;\n      } else {\n        return num\n      }\n    }\n  },\n  computed: {\n    timeLeft() {\n      let min = Math.floor(this.totalTime / 60);\n      let sec = this.totalTime % 60;\n      return `${this.formatTime(min)} : ${this.formatTime(sec)}`;\n    },\n  },\n  watch: {\n    totalTime(newValue) {\n      this.percent = Math.floor(newValue / (this.minutes * this.seconds)*100);\n    }\n  },\n  mounted() {\n    this.reStart();\n    this.onAuthState();\n  },\n}).mount('#app');"]}