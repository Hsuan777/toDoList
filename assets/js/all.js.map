{"version":3,"sources":["all.js","dragdropTouch.js"],"names":["firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebase","initializeApp","db","database","app","Vue","createApp","data","toDoList","toDo","hasLogin","uid","totalTime","seconds","minutes","countDown","started","percent","targetSource","newIndex","oldIndex","methods","getData","vm","ref","on","snapshot","Object","entries","val","forEach","item","index","push","order","console","log","postData","trim","key","child","set","date","Date","getTime","length","checked","updateChecked","tempObj","update","updateDataAll","deleteData","remove","deleteAll","googleLogin","provider","auth","GoogleAuthProvider","signInWithPopup","then","result","onAuthState","facebookLogin","FacebookAuthProvider","addScope","setCustomParameters","signOut","alert","reStart","onAuthStateChanged","user","cleanData","start","setInterval","clearInterval","stop","dragStart","e","oldOrder","target","classList","add","dropped","cancelDefault","dragEnd","changeData","newOrder","dragEnter","tagName","dragOver","touchStart","touches","parentElement","touchMove","touchEnd","pointerOver","dragLeave","preventDefault","stopPropagation","originToDo","originChecked","computed","timeLeft","min","Math","floor","sec","formatTime","num","awaitData","filter","finishedData","watch","newValue","mounted","mount","DragDropTouch","DragDropTouch_1","DataTransfer","_dropEffect","_effectAllowed","_data","defineProperty","prototype","get","value","enumerable","configurable","keys","clearData","type","toLowerCase","setData","setDragImage","img","offsetX","offsetY","ddt","_instance","_imgCustom","_imgOffset","x","y","_lastClick","supportsPassive","document","addEventListener","passive","navigator","maxTouchPoints","d","ts","_touchstart","bind","tm","_touchmove","te","_touchend","opt","capture","getInstance","_this","_shouldHandle","now","_DBLCLICK","_dispatchEvent","_reset","src","_closestDraggable","_dragSource","_ptDown","_getPoint","_lastTouch","setTimeout","_img","_CTXMENU","_ISPRESSHOLDMODE","_pressHoldInterval","_isDragEnabled","_PRESSHOLDAWAIT","_shouldCancelPressHoldMove","_shouldHandleMove","_shouldHandlePressHoldMove","_getTarget","_shouldStartDragging","_createImage","_lastTarget","_moveImage","_isDropZone","_destroyImage","indexOf","defaultPrevented","_getDelta","_PRESSHOLDMARGIN","delta","_THRESHOLD","_PRESSHOLDTHRESHOLD","_dataTransfer","page","pageX","clientX","pageY","clientY","p","abs","pt","el","elementFromPoint","getComputedStyle","pointerEvents","cloneNode","_copyStyle","style","top","left","rc","getBoundingClientRect","opacity","_OPACITY","toString","body","appendChild","removeChild","requestAnimationFrame","s","position","zIndex","round","_copyProps","dst","props","i","_rmvAtts","att","removeAttribute","HTMLCanvasElement","cSrc","cDst","width","height","getContext","drawImage","cs","children","evt","createEvent","t","initEvent","button","which","buttons","_kbdProps","_ptProps","dataTransfer","dispatchEvent","hasAttribute","draggable","split"],"mappings":"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","file":"all.js","sourcesContent":["// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD1NqNVJuZyWRWTIn6JPFWDv3E7cPZdjws\",\n  authDomain: \"to-do-list-21e2c.firebaseapp.com\",\n  databaseURL: \"https://to-do-list-21e2c-default-rtdb.firebaseio.com\",\n  projectId: \"to-do-list-21e2c\",\n  storageBucket: \"to-do-list-21e2c.appspot.com\",\n  messagingSenderId: \"174717852507\",\n  appId: \"1:174717852507:web:305e301fdb95df65d0d87e\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\n// firebase 資料庫\nconst db = firebase.database();\n\n// Vue\nconst app = Vue.createApp({\n  data() {\n    return {\n      // toDoList\n      toDoList: [],\n      toDo: '',\n      hasLogin: false,\n      uid: '',\n      totalTime: 0,\n      // 番茄鐘\n      seconds: 60,\n      minutes : 25,\n      countDown: null,\n      started: false,\n      percent: 0,\n      // 拖曳元素\n      targetSource: '',\n      newIndex: '',\n      oldIndex: ''\n    }\n  },\n  methods: {\n    /* toDoList */\n    getData() {\n      const vm = this;\n      // 取得屬性值\n      db.ref(`${vm.uid}`).on('value', (snapshot) => {\n        vm.toDoList = [];\n        Object.entries(snapshot.val() || {}).forEach((item, index) => {\n          vm.toDoList.push(item[1]);\n          vm.toDoList[index].order = index;\n        })\n        console.log(vm.toDoList);\n      })\n    },\n    postData() {\n      if (!this.toDo.trim()) {\n        return;\n      }\n      // 取得推送亂數 ID\n      const key = db.ref(`${this.uid}`).push().key;\n\n      // 推送，在子層建立資料\n      db.ref(`${this.uid}`).child(key).set({\n        // 加入相同 key 值，方便刪除\n        key: key,\n        toDo: this.toDo,\n        date: new Date().getTime(),\n        order: this.toDoList.length + 1,\n        checked: false,\n      })\n      this.toDo = '';\n    },\n    updateChecked(item) {\n      let tempObj = item;\n      tempObj.checked = !tempObj.checked;\n      db.ref(`${this.uid}`).child(item.key).update(tempObj);\n    },\n    updateDataAll() {\n      let tempObj = {};\n      this.toDoList.forEach(item => {\n        tempObj[item.key] = item;\n      })\n      db.ref(`${this.uid}`).update(tempObj);\n      this.getData();\n    },\n    deleteData(key) {\n      db.ref(`${this.uid}`).child(key).remove();\n      this.updateDataAll();\n    },\n    deleteAll() {\n      db.ref(`${this.uid}`).remove();\n    },\n    // google 登入\n    googleLogin() {\n      const provider = new firebase.auth.GoogleAuthProvider();\n      const vm = this;\n      firebase.auth().signInWithPopup(provider).then(function (result) {\n        // 可以獲得 Google 提供 token，token可透過 Google API 獲得其他數據。\n        // const credential = result.credential;\n        // const token = result.credential.accessToken;\n        // const user = result.user;\n        vm.onAuthState();\n      });\n    },\n    facebookLogin() {\n      const provider = new firebase.auth.FacebookAuthProvider();\n      const vm = this;\n      provider.addScope('user_birthday');\n      provider.setCustomParameters({\n        'display': 'popup'\n      }); \n      firebase.auth().signInWithPopup(provider).then(function(result) {\n        // 取得FB Token，可以使用於FB API中\n        // const token = result.credential.accessToken;\n        // 使用者資料\n        // const FBUser = result.user;\n        vm.onAuthState();\n      })\n    },\n    // 登出\n    signOut() {\n      firebase.auth().signOut().then(() => {\n        this.onAuthState();\n        alert('已登出');\n      })\n      this.reStart();\n    },\n    // 監聽登入狀態\n    onAuthState() {\n      const vm = this;\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          console.log(\"User is logined\")\n          vm.hasLogin = true;\n          vm.uid = user.uid;\n          vm.getData();\n        } else {\n          console.log(\"User is not logined yet.\");\n          vm.cleanData();\n        }\n      });\n    },\n    cleanData() {\n      this.hasLogin = false;\n      this.toDoList = {};\n      this.uid = '';\n    },\n    /* 番茄鐘 */\n    start() {\n      this.started = true;\n      this.countDown = setInterval(() => {\n        this.totalTime -= 1;\n        if (this.totalTime === 0) {\n          clearInterval(this.countDown);\n        }\n      }, 1000);\n    },\n    stop() {\n      this.started = false;\n      clearInterval(this.countDown);\n    },\n    reStart() {\n      this.started = false;\n      this.totalTime = this.minutes * this.seconds;\n      clearInterval(this.countDown);\n    },\n    /* 拖曳元素 */\n    // 開始拖曳，指得是要被拖曳的物件\n    dragStart(order, e) {\n      this.oldOrder = order;\n      this.targetSource = e.target;\n      this.targetSource.classList.add('list-group--hover');\n    },\n    // 放至有效的目標容器\n    dropped(e) {\n      this.cancelDefault(e)\n      if (e.target === this.targetSource) {\n        return ;\n      }\n      e.target.classList.remove('list-group--hover');\n    },\n    // 拖曳結束，譬如放開滑鼠時，鍵盤 keyup 時\n    dragEnd(e) {\n      if (e.target === this.targetSource) {\n        return ;\n      }\n      e.target.classList.remove('list-group--hover');\n      this.changeData(this.oldOrder, this.newOrder);\n    },\n    // 進入目標容器\n    dragEnter(e) {\n      this.cancelDefault(e)\n      // 狀態很快會變成\"經過容器\"\n      // 當不是原本的目標容器時，變化 CSS 效果\n      if (e.target !== this.targetSource && e.target.tagName === 'LI') {\n        e.target.classList.add('list-group--hover', 'list-group--over')\n      }\n    },\n    // 經過目標容器\n    dragOver(order, e) {\n      this.cancelDefault(e);\n      this.newOrder = order;\n      // 讓拖回原本的目標容器也會有 CSS 效果\n      if (e.target === this.targetSource) {\n        e.target.classList.add('list-group--hover');\n      }\n    },\n    touchStart(order, e) {\n      this.oldOrder = order;\n      this.targetSource = e.touches[0].target.parentElement.parentElement;\n      e.touches['0'].target.parentElement.parentElement.classList.add('list-group--hover');\n    },\n    // touch 移動時\n    touchMove(order, e) {\n      this.cancelDefault(e);\n      e.touches['0'].target.parentElement.parentElement.classList.add('list-group--hover', 'list-group--over')\n      // console.log(e);\n      // console.log(e.targetTouches);\n    },\n    // touch 放開時\n    touchEnd(e) {\n      // console.log(e);\n      // console.log(this.targetSource);\n      this.targetSource.classList.remove('list-group--hover', 'list-group--over');\n      // e.target.parentElement.parentElement.classList.remove('list-group--hover', 'list-group--over');\n      if (e.target.parentElement.parentElement === this.targetSource) {\n        return ;\n      }\n      // this.changeData(this.oldOrder, this.newOrder);\n    },\n    pointerOver(e) {\n      console.log(e);\n    },\n    // 離開容器\n    dragLeave(e) {\n      this.cancelDefault(e)\n      // e.target 指得是 li\n      e.target.classList.remove('list-group--hover', 'list-group--over')\n    },\n    // 取消預設行為\n    cancelDefault(e) {\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    changeData(oldOrder, newOrder) {\n      let originToDo = this.toDoList[newOrder].toDo; \n      let originChecked = this.toDoList[newOrder].checked; \n      this.toDoList[newOrder].toDo = this.toDoList[oldOrder].toDo\n      this.toDoList[newOrder].checked = this.toDoList[oldOrder].checked\n      this.toDoList[oldOrder].toDo = originToDo;\n      this.toDoList[oldOrder].checked = originChecked;\n      this.updateDataAll();\n    },\n  },\n  computed: {\n    // 格式化剩餘時間\n    timeLeft() {\n      let min = Math.floor(this.totalTime / 60);\n      let sec = this.totalTime % 60;\n      const formatTime = (num) => {\n        if (num < 10) {\n          return '0' + num;\n        } else {\n          return num\n        }\n      }\n      return `${formatTime(min)} : ${formatTime(sec)}`;\n    },\n    awaitData() {\n      return this.toDoList.filter(item => item.checked === false);\n    },\n    finishedData() {\n      return this.toDoList.filter(item => item.checked === true);\n    },\n  },\n  watch: {\n    totalTime(newValue) {\n      this.percent = Math.floor(newValue / (this.minutes * this.seconds)*100);\n    }\n  },\n  mounted() {\n    this.reStart();\n    this.onAuthState();\n  },\n}).mount('#app');","var DragDropTouch;\n(function (DragDropTouch_1) {\n    'use strict';\n    /**\n     * Object used to hold the data that is being dragged during drag and drop operations.\n     *\n     * It may hold one or more data items of different types. For more information about\n     * drag and drop operations and data transfer objects, see\n     * <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer\">HTML Drag and Drop API</a>.\n     *\n     * This object is created automatically by the @see:DragDropTouch singleton and is\n     * accessible through the @see:dataTransfer property of all drag events.\n     */\n    var DataTransfer = (function () {\n        function DataTransfer() {\n            this._dropEffect = 'move';\n            this._effectAllowed = 'all';\n            this._data = {};\n        }\n        Object.defineProperty(DataTransfer.prototype, \"dropEffect\", {\n            /**\n             * Gets or sets the type of drag-and-drop operation currently selected.\n             * The value must be 'none',  'copy',  'link', or 'move'.\n             */\n            get: function () {\n                return this._dropEffect;\n            },\n            set: function (value) {\n                this._dropEffect = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(DataTransfer.prototype, \"effectAllowed\", {\n            /**\n             * Gets or sets the types of operations that are possible.\n             * Must be one of 'none', 'copy', 'copyLink', 'copyMove', 'link',\n             * 'linkMove', 'move', 'all' or 'uninitialized'.\n             */\n            get: function () {\n                return this._effectAllowed;\n            },\n            set: function (value) {\n                this._effectAllowed = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(DataTransfer.prototype, \"types\", {\n            /**\n             * Gets an array of strings giving the formats that were set in the @see:dragstart event.\n             */\n            get: function () {\n                return Object.keys(this._data);\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * Removes the data associated with a given type.\n         *\n         * The type argument is optional. If the type is empty or not specified, the data\n         * associated with all types is removed. If data for the specified type does not exist,\n         * or the data transfer contains no data, this method will have no effect.\n         *\n         * @param type Type of data to remove.\n         */\n        DataTransfer.prototype.clearData = function (type) {\n            if (type != null) {\n                delete this._data[type.toLowerCase()];\n            }\n            else {\n                this._data = {};\n            }\n        };\n        /**\n         * Retrieves the data for a given type, or an empty string if data for that type does\n         * not exist or the data transfer contains no data.\n         *\n         * @param type Type of data to retrieve.\n         */\n        DataTransfer.prototype.getData = function (type) {\n            return this._data[type.toLowerCase()] || '';\n        };\n        /**\n         * Set the data for a given type.\n         *\n         * For a list of recommended drag types, please see\n         * https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Recommended_Drag_Types.\n         *\n         * @param type Type of data to add.\n         * @param value Data to add.\n         */\n        DataTransfer.prototype.setData = function (type, value) {\n            this._data[type.toLowerCase()] = value;\n        };\n        /**\n         * Set the image to be used for dragging if a custom one is desired.\n         *\n         * @param img An image element to use as the drag feedback image.\n         * @param offsetX The horizontal offset within the image.\n         * @param offsetY The vertical offset within the image.\n         */\n        DataTransfer.prototype.setDragImage = function (img, offsetX, offsetY) {\n            var ddt = DragDropTouch._instance;\n            ddt._imgCustom = img;\n            ddt._imgOffset = { x: offsetX, y: offsetY };\n        };\n        return DataTransfer;\n    }());\n    DragDropTouch_1.DataTransfer = DataTransfer;\n    /**\n     * Defines a class that adds support for touch-based HTML5 drag/drop operations.\n     *\n     * The @see:DragDropTouch class listens to touch events and raises the\n     * appropriate HTML5 drag/drop events as if the events had been caused\n     * by mouse actions.\n     *\n     * The purpose of this class is to enable using existing, standard HTML5\n     * drag/drop code on mobile devices running IOS or Android.\n     *\n     * To use, include the DragDropTouch.js file on the page. The class will\n     * automatically start monitoring touch events and will raise the HTML5\n     * drag drop events (dragstart, dragenter, dragleave, drop, dragend) which\n     * should be handled by the application.\n     *\n     * For details and examples on HTML drag and drop, see\n     * https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Drag_operations.\n     */\n    var DragDropTouch = (function () {\n        /**\n         * Initializes the single instance of the @see:DragDropTouch class.\n         */\n        function DragDropTouch() {\n            this._lastClick = 0;\n            // enforce singleton pattern\n            if (DragDropTouch._instance) {\n                throw 'DragDropTouch instance already created.';\n            }\n            // detect passive event support\n            // https://github.com/Modernizr/Modernizr/issues/1894\n            var supportsPassive = false;\n            document.addEventListener('test', function () { }, {\n                get passive() {\n                    supportsPassive = true;\n                    return true;\n                }\n            });\n            // listen to touch events\n            if (navigator.maxTouchPoints) {\n                var d = document, \n                    ts = this._touchstart.bind(this), \n                    tm = this._touchmove.bind(this), \n                    te = this._touchend.bind(this), \n                    opt = supportsPassive ? { passive: false, capture: false } : false;\n                d.addEventListener('touchstart', ts, opt);\n                d.addEventListener('touchmove', tm, opt);\n                d.addEventListener('touchend', te);\n                d.addEventListener('touchcancel', te);\n            }\n        }\n        /**\n         * Gets a reference to the @see:DragDropTouch singleton.\n         */\n        DragDropTouch.getInstance = function () {\n            return DragDropTouch._instance;\n        };\n        // ** event handlers\n        DragDropTouch.prototype._touchstart = function (e) {\n            var _this = this;\n            if (this._shouldHandle(e)) {\n                // raise double-click and prevent zooming\n                if (Date.now() - this._lastClick < DragDropTouch._DBLCLICK) {\n                    if (this._dispatchEvent(e, 'dblclick', e.target)) {\n                        e.preventDefault();\n                        this._reset();\n                        return;\n                    }\n                }\n                // clear all variables\n                this._reset();\n                // get nearest draggable element\n                var src = this._closestDraggable(e.target);\n                if (src) {\n                    // give caller a chance to handle the hover/move events\n                    if (!this._dispatchEvent(e, 'mousemove', e.target) &&\n                        !this._dispatchEvent(e, 'mousedown', e.target)) {\n                        // get ready to start dragging\n                        this._dragSource = src;\n                        this._ptDown = this._getPoint(e);\n                        this._lastTouch = e;\n                        e.preventDefault();\n                        // show context menu if the user hasn't started dragging after a while\n                        setTimeout(function () {\n                            if (_this._dragSource == src && _this._img == null) {\n                                if (_this._dispatchEvent(e, 'contextmenu', src)) {\n                                    _this._reset();\n                                }\n                            }\n                        }, DragDropTouch._CTXMENU);\n                        if (DragDropTouch._ISPRESSHOLDMODE) {\n                            this._pressHoldInterval = setTimeout(function () {\n                                _this._isDragEnabled = true;\n                                _this._touchmove(e);\n                            }, DragDropTouch._PRESSHOLDAWAIT);\n                        }\n                    }\n                }\n            }\n        };\n        DragDropTouch.prototype._touchmove = function (e) {\n            if (this._shouldCancelPressHoldMove(e)) {\n              this._reset();\n              return;\n            }\n            if (this._shouldHandleMove(e) || this._shouldHandlePressHoldMove(e)) {\n                // see if target wants to handle move\n                var target = this._getTarget(e);\n                if (this._dispatchEvent(e, 'mousemove', target)) {\n                    this._lastTouch = e;\n                    e.preventDefault();\n                    return;\n                }\n                // start dragging\n                if (this._dragSource && !this._img && this._shouldStartDragging(e)) {\n                    this._dispatchEvent(e, 'dragstart', this._dragSource);\n                    this._createImage(e);\n                    this._dispatchEvent(e, 'dragenter', target);\n                }\n                // continue dragging\n                if (this._img) {\n                    this._lastTouch = e;\n                    e.preventDefault(); // prevent scrolling\n                    this._dispatchEvent(e, 'drag', this._dragSource);\n                    if (target != this._lastTarget) {\n                        this._dispatchEvent(this._lastTouch, 'dragleave', this._lastTarget);\n                        this._dispatchEvent(e, 'dragenter', target);\n                        this._lastTarget = target;\n                    }\n                    this._moveImage(e);\n                    this._isDropZone = this._dispatchEvent(e, 'dragover', target);\n                }\n            }\n        };\n        DragDropTouch.prototype._touchend = function (e) {\n            if (this._shouldHandle(e)) {\n                // see if target wants to handle up\n                if (this._dispatchEvent(this._lastTouch, 'mouseup', e.target)) {\n                    e.preventDefault();\n                    return;\n                }\n                // user clicked the element but didn't drag, so clear the source and simulate a click\n                if (!this._img) {\n                    this._dragSource = null;\n                    this._dispatchEvent(this._lastTouch, 'click', e.target);\n                    this._lastClick = Date.now();\n                }\n                // finish dragging\n                this._destroyImage();\n                if (this._dragSource) {\n                    if (e.type.indexOf('cancel') < 0 && this._isDropZone) {\n                        this._dispatchEvent(this._lastTouch, 'drop', this._lastTarget);\n                    }\n                    this._dispatchEvent(this._lastTouch, 'dragend', this._dragSource);\n                    this._reset();\n                }\n            }\n        };\n        // ** utilities\n        // ignore events that have been handled or that involve more than one touch\n        DragDropTouch.prototype._shouldHandle = function (e) {\n            return e &&\n                !e.defaultPrevented &&\n                e.touches && e.touches.length < 2;\n        };\n\n        // use regular condition outside of press & hold mode\n        DragDropTouch.prototype._shouldHandleMove = function (e) {\n          return !DragDropTouch._ISPRESSHOLDMODE && this._shouldHandle(e);\n        };\n\n        // allow to handle moves that involve many touches for press & hold\n        DragDropTouch.prototype._shouldHandlePressHoldMove = function (e) {\n          return DragDropTouch._ISPRESSHOLDMODE &&\n              this._isDragEnabled && e && e.touches && e.touches.length;\n        };\n\n        // reset data if user drags without pressing & holding\n        DragDropTouch.prototype._shouldCancelPressHoldMove = function (e) {\n          return DragDropTouch._ISPRESSHOLDMODE && !this._isDragEnabled &&\n              this._getDelta(e) > DragDropTouch._PRESSHOLDMARGIN;\n        };\n\n        // start dragging when specified delta is detected\n        DragDropTouch.prototype._shouldStartDragging = function (e) {\n            var delta = this._getDelta(e);\n            return delta > DragDropTouch._THRESHOLD ||\n                (DragDropTouch._ISPRESSHOLDMODE && delta >= DragDropTouch._PRESSHOLDTHRESHOLD);\n        }\n\n        // clear all members\n        DragDropTouch.prototype._reset = function () {\n            this._destroyImage();\n            this._dragSource = null;\n            this._lastTouch = null;\n            this._lastTarget = null;\n            this._ptDown = null;\n            this._isDragEnabled = false;\n            this._isDropZone = false;\n            this._dataTransfer = new DataTransfer();\n            clearInterval(this._pressHoldInterval);\n        };\n        // get point for a touch event\n        DragDropTouch.prototype._getPoint = function (e, page) {\n            if (e && e.touches) {\n                e = e.touches[0];\n            }\n            return { x: page ? e.pageX : e.clientX, y: page ? e.pageY : e.clientY };\n        };\n        // get distance between the current touch event and the first one\n        DragDropTouch.prototype._getDelta = function (e) {\n            if (DragDropTouch._ISPRESSHOLDMODE && !this._ptDown) { return 0; }\n            var p = this._getPoint(e);\n            return Math.abs(p.x - this._ptDown.x) + Math.abs(p.y - this._ptDown.y);\n        };\n        // get the element at a given touch event\n        DragDropTouch.prototype._getTarget = function (e) {\n            var pt = this._getPoint(e), el = document.elementFromPoint(pt.x, pt.y);\n            while (el && getComputedStyle(el).pointerEvents == 'none') {\n                el = el.parentElement;\n            }\n            return el;\n        };\n        // create drag image from source element\n        DragDropTouch.prototype._createImage = function (e) {\n            // just in case...\n            if (this._img) {\n                this._destroyImage();\n            }\n            // create drag image from custom element or drag source\n            var src = this._imgCustom || this._dragSource;\n            this._img = src.cloneNode(true);\n            this._copyStyle(src, this._img);\n            this._img.style.top = this._img.style.left = '-9999px';\n            // if creating from drag source, apply offset and opacity\n            if (!this._imgCustom) {\n                var rc = src.getBoundingClientRect(), pt = this._getPoint(e);\n                this._imgOffset = { x: pt.x - rc.left, y: pt.y - rc.top };\n                this._img.style.opacity = DragDropTouch._OPACITY.toString();\n            }\n            // add image to document\n            this._moveImage(e);\n            document.body.appendChild(this._img);\n        };\n        // dispose of drag image element\n        DragDropTouch.prototype._destroyImage = function () {\n            if (this._img && this._img.parentElement) {\n                this._img.parentElement.removeChild(this._img);\n            }\n            this._img = null;\n            this._imgCustom = null;\n        };\n        // move the drag image element\n        DragDropTouch.prototype._moveImage = function (e) {\n            var _this = this;\n            requestAnimationFrame(function () {\n                if (_this._img) {\n                    var pt = _this._getPoint(e, true), s = _this._img.style;\n                    s.position = 'absolute';\n                    s.pointerEvents = 'none';\n                    s.zIndex = '999999';\n                    s.left = Math.round(pt.x - _this._imgOffset.x) + 'px';\n                    s.top = Math.round(pt.y - _this._imgOffset.y) + 'px';\n                }\n            });\n        };\n        // copy properties from an object to another\n        DragDropTouch.prototype._copyProps = function (dst, src, props) {\n            for (var i = 0; i < props.length; i++) {\n                var p = props[i];\n                dst[p] = src[p];\n            }\n        };\n        DragDropTouch.prototype._copyStyle = function (src, dst) {\n            // remove potentially troublesome attributes\n            DragDropTouch._rmvAtts.forEach(function (att) {\n                dst.removeAttribute(att);\n            });\n            // copy canvas content\n            if (src instanceof HTMLCanvasElement) {\n                var cSrc = src, cDst = dst;\n                cDst.width = cSrc.width;\n                cDst.height = cSrc.height;\n                cDst.getContext('2d').drawImage(cSrc, 0, 0);\n            }\n            // copy style (without transitions)\n            var cs = getComputedStyle(src);\n            for (var i = 0; i < cs.length; i++) {\n                var key = cs[i];\n                if (key.indexOf('transition') < 0) {\n                    dst.style[key] = cs[key];\n                }\n            }\n            dst.style.pointerEvents = 'none';\n            // and repeat for all children\n            for (var i = 0; i < src.children.length; i++) {\n                this._copyStyle(src.children[i], dst.children[i]);\n            }\n        };\n        DragDropTouch.prototype._dispatchEvent = function (e, type, target) {\n            if (e && target) {\n                var evt = document.createEvent('Event'), t = e.touches ? e.touches[0] : e;\n                evt.initEvent(type, true, true);\n                evt.button = 0;\n                evt.which = evt.buttons = 1;\n                this._copyProps(evt, e, DragDropTouch._kbdProps);\n                this._copyProps(evt, t, DragDropTouch._ptProps);\n                evt.dataTransfer = this._dataTransfer;\n                target.dispatchEvent(evt);\n                return evt.defaultPrevented;\n            }\n            return false;\n        };\n        // gets an element's closest draggable ancestor\n        DragDropTouch.prototype._closestDraggable = function (e) {\n            for (; e; e = e.parentElement) {\n                if (e.hasAttribute('draggable') && e.draggable) {\n                    return e;\n                }\n            }\n            return null;\n        };\n        return DragDropTouch;\n    }());\n    /*private*/ DragDropTouch._instance = new DragDropTouch(); // singleton\n    // constants\n    DragDropTouch._THRESHOLD = 5; // pixels to move before drag starts\n    DragDropTouch._OPACITY = 0.5; // drag image opacity\n    DragDropTouch._DBLCLICK = 500; // max ms between clicks in a double click\n    DragDropTouch._CTXMENU = 900; // ms to hold before raising 'contextmenu' event\n    DragDropTouch._ISPRESSHOLDMODE = false; // decides of press & hold mode presence\n    DragDropTouch._PRESSHOLDAWAIT = 400; // ms to wait before press & hold is detected\n    DragDropTouch._PRESSHOLDMARGIN = 25; // pixels that finger might shiver while pressing\n    DragDropTouch._PRESSHOLDTHRESHOLD = 0; // pixels to move before drag starts\n    // copy styles/attributes from drag source to drag image element\n    DragDropTouch._rmvAtts = 'id,class,style,draggable'.split(',');\n    // synthesize and dispatch an event\n    // returns true if the event has been handled (e.preventDefault == true)\n    DragDropTouch._kbdProps = 'altKey,ctrlKey,metaKey,shiftKey'.split(',');\n    DragDropTouch._ptProps = 'pageX,pageY,clientX,clientY,screenX,screenY,offsetX,offsetY'.split(',');\n    DragDropTouch_1.DragDropTouch = DragDropTouch;\n})(DragDropTouch || (DragDropTouch = {}));"]}