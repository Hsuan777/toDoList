{"version":3,"sources":["all.js","dragdropTouch.js"],"names":["firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebase","initializeApp","db","database","app","Vue","createApp","data","toDoList","toDo","hasLogin","uid","totalTime","seconds","minutes","countDown","started","percent","targetSource","newIndex","oldIndex","methods","getData","vm","ref","on","snapshot","Object","entries","val","forEach","item","index","push","order","console","log","postData","trim","key","child","set","date","Date","getTime","length","checked","updateChecked","tempObj","update","updateDataAll","deleteData","remove","deleteAll","googleLogin","provider","auth","GoogleAuthProvider","signInWithPopup","then","result","onAuthState","facebookLogin","FacebookAuthProvider","addScope","setCustomParameters","signOut","alert","reStart","onAuthStateChanged","user","cleanData","start","setInterval","clearInterval","stop","dragStart","e","oldOrder","target","classList","add","dropped","dragEnd","changeData","newOrder","dragEnter","tagName","dragOver","dragLeave","originToDo","originChecked","computed","timeLeft","min","Math","floor","sec","formatTime","num","awaitData","filter","finishedData","watch","newValue","mounted","mount","DragDropTouch","DragDropTouch_1","DataTransfer","_dropEffect","_effectAllowed","_data","defineProperty","prototype","get","value","enumerable","configurable","keys","clearData","type","toLowerCase","setData","setDragImage","img","offsetX","offsetY","ddt","_instance","_imgCustom","_imgOffset","x","y","_lastClick","supportsPassive","document","addEventListener","passive","navigator","maxTouchPoints","d","ts","_touchstart","bind","tm","_touchmove","te","_touchend","opt","capture","getInstance","_this","_shouldHandle","now","_DBLCLICK","_dispatchEvent","preventDefault","_reset","src","_closestDraggable","_dragSource","_ptDown","_getPoint","_lastTouch","setTimeout","_img","_CTXMENU","_ISPRESSHOLDMODE","_pressHoldInterval","_isDragEnabled","_PRESSHOLDAWAIT","_shouldCancelPressHoldMove","_shouldHandleMove","_shouldHandlePressHoldMove","_getTarget","_shouldStartDragging","_createImage","_lastTarget","_moveImage","_isDropZone","_destroyImage","indexOf","defaultPrevented","touches","_getDelta","_PRESSHOLDMARGIN","delta","_THRESHOLD","_PRESSHOLDTHRESHOLD","_dataTransfer","page","pageX","clientX","pageY","clientY","p","abs","pt","el","elementFromPoint","getComputedStyle","pointerEvents","parentElement","cloneNode","_copyStyle","style","top","left","rc","getBoundingClientRect","opacity","_OPACITY","toString","body","appendChild","removeChild","requestAnimationFrame","s","position","zIndex","round","_copyProps","dst","props","i","_rmvAtts","att","removeAttribute","HTMLCanvasElement","cSrc","cDst","width","height","getContext","drawImage","cs","children","evt","createEvent","t","initEvent","button","which","buttons","_kbdProps","_ptProps","dataTransfer","dispatchEvent","hasAttribute","draggable","split"],"mappings":";;AAAA;AACA,IAAMA,cAAc,GAAG;AACrBC,EAAAA,MAAM,EAAE,yCADa;AAErBC,EAAAA,UAAU,EAAE,kCAFS;AAGrBC,EAAAA,WAAW,EAAE,sDAHQ;AAIrBC,EAAAA,SAAS,EAAE,kBAJU;AAKrBC,EAAAA,aAAa,EAAE,8BALM;AAMrBC,EAAAA,iBAAiB,EAAE,cANE;AAOrBC,EAAAA,KAAK,EAAE;AAPc,CAAvB,C,CASA;;AACAC,QAAQ,CAACC,aAAT,CAAuBT,cAAvB,E,CAEA;;AACA,IAAMU,EAAE,GAAGF,QAAQ,CAACG,QAAT,EAAX,C,CAEA;;AACA,IAAMC,GAAG,GAAGC,GAAG,CAACC,SAAJ,CAAc;AACxBC,EAAAA,IADwB,kBACjB;AACL,WAAO;AACL;AACAC,MAAAA,QAAQ,EAAE,EAFL;AAGLC,MAAAA,IAAI,EAAE,EAHD;AAILC,MAAAA,QAAQ,EAAE,KAJL;AAKLC,MAAAA,GAAG,EAAE,EALA;AAMLC,MAAAA,SAAS,EAAE,CANN;AAOL;AACAC,MAAAA,OAAO,EAAE,EARJ;AASLC,MAAAA,OAAO,EAAG,EATL;AAULC,MAAAA,SAAS,EAAE,IAVN;AAWLC,MAAAA,OAAO,EAAE,KAXJ;AAYLC,MAAAA,OAAO,EAAE,CAZJ;AAaL;AACAC,MAAAA,YAAY,EAAE,EAdT;AAeLC,MAAAA,QAAQ,EAAE,EAfL;AAgBLC,MAAAA,QAAQ,EAAE;AAhBL,KAAP;AAkBD,GApBuB;AAqBxBC,EAAAA,OAAO,EAAE;AACP;AACAC,IAAAA,OAFO,qBAEG;AACR,UAAMC,EAAE,GAAG,IAAX,CADQ,CAER;;AACArB,MAAAA,EAAE,CAACsB,GAAH,WAAUD,EAAE,CAACZ,GAAb,GAAoBc,EAApB,CAAuB,OAAvB,EAAgC,UAACC,QAAD,EAAc;AAC5CH,QAAAA,EAAE,CAACf,QAAH,GAAc,EAAd;AACAmB,QAAAA,MAAM,CAACC,OAAP,CAAeF,QAAQ,CAACG,GAAT,MAAkB,EAAjC,EAAqCC,OAArC,CAA6C,UAACC,IAAD,EAAOC,KAAP,EAAiB;AAC5DT,UAAAA,EAAE,CAACf,QAAH,CAAYyB,IAAZ,CAAiBF,IAAI,CAAC,CAAD,CAArB;AACAR,UAAAA,EAAE,CAACf,QAAH,CAAYwB,KAAZ,EAAmBE,KAAnB,GAA2BF,KAA3B;AACD,SAHD;AAIAG,QAAAA,OAAO,CAACC,GAAR,CAAYb,EAAE,CAACf,QAAf;AACD,OAPD;AAQD,KAbM;AAcP6B,IAAAA,QAdO,sBAcI;AACT,UAAI,CAAC,KAAK5B,IAAL,CAAU6B,IAAV,EAAL,EAAuB;AACrB;AACD,OAHQ,CAIT;;;AACA,UAAMC,GAAG,GAAGrC,EAAE,CAACsB,GAAH,WAAU,KAAKb,GAAf,GAAsBsB,IAAtB,GAA6BM,GAAzC,CALS,CAOT;;AACArC,MAAAA,EAAE,CAACsB,GAAH,WAAU,KAAKb,GAAf,GAAsB6B,KAAtB,CAA4BD,GAA5B,EAAiCE,GAAjC,CAAqC;AACnC;AACAF,QAAAA,GAAG,EAAEA,GAF8B;AAGnC9B,QAAAA,IAAI,EAAE,KAAKA,IAHwB;AAInCiC,QAAAA,IAAI,EAAE,IAAIC,IAAJ,GAAWC,OAAX,EAJ6B;AAKnCV,QAAAA,KAAK,EAAE,KAAK1B,QAAL,CAAcqC,MAAd,GAAuB,CALK;AAMnCC,QAAAA,OAAO,EAAE;AAN0B,OAArC;AAQA,WAAKrC,IAAL,GAAY,EAAZ;AACD,KA/BM;AAgCPsC,IAAAA,aAhCO,yBAgCOhB,IAhCP,EAgCa;AAClB,UAAIiB,OAAO,GAAGjB,IAAd;AACAiB,MAAAA,OAAO,CAACF,OAAR,GAAkB,CAACE,OAAO,CAACF,OAA3B;AACA5C,MAAAA,EAAE,CAACsB,GAAH,WAAU,KAAKb,GAAf,GAAsB6B,KAAtB,CAA4BT,IAAI,CAACQ,GAAjC,EAAsCU,MAAtC,CAA6CD,OAA7C;AACD,KApCM;AAqCPE,IAAAA,aArCO,2BAqCS;AACd,UAAIF,OAAO,GAAG,EAAd;AACA,WAAKxC,QAAL,CAAcsB,OAAd,CAAsB,UAAAC,IAAI,EAAI;AAC5BiB,QAAAA,OAAO,CAACjB,IAAI,CAACQ,GAAN,CAAP,GAAoBR,IAApB;AACD,OAFD;AAGA7B,MAAAA,EAAE,CAACsB,GAAH,WAAU,KAAKb,GAAf,GAAsBsC,MAAtB,CAA6BD,OAA7B;AACA,WAAK1B,OAAL;AACD,KA5CM;AA6CP6B,IAAAA,UA7CO,sBA6CIZ,GA7CJ,EA6CS;AACdrC,MAAAA,EAAE,CAACsB,GAAH,WAAU,KAAKb,GAAf,GAAsB6B,KAAtB,CAA4BD,GAA5B,EAAiCa,MAAjC;AACA,WAAKF,aAAL;AACD,KAhDM;AAiDPG,IAAAA,SAjDO,uBAiDK;AACVnD,MAAAA,EAAE,CAACsB,GAAH,WAAU,KAAKb,GAAf,GAAsByC,MAAtB;AACD,KAnDM;AAoDP;AACAE,IAAAA,WArDO,yBAqDO;AACZ,UAAMC,QAAQ,GAAG,IAAIvD,QAAQ,CAACwD,IAAT,CAAcC,kBAAlB,EAAjB;AACA,UAAMlC,EAAE,GAAG,IAAX;AACAvB,MAAAA,QAAQ,CAACwD,IAAT,GAAgBE,eAAhB,CAAgCH,QAAhC,EAA0CI,IAA1C,CAA+C,UAAUC,MAAV,EAAkB;AAC/D;AACA;AACA;AACA;AACArC,QAAAA,EAAE,CAACsC,WAAH;AACD,OAND;AAOD,KA/DM;AAgEPC,IAAAA,aAhEO,2BAgES;AACd,UAAMP,QAAQ,GAAG,IAAIvD,QAAQ,CAACwD,IAAT,CAAcO,oBAAlB,EAAjB;AACA,UAAMxC,EAAE,GAAG,IAAX;AACAgC,MAAAA,QAAQ,CAACS,QAAT,CAAkB,eAAlB;AACAT,MAAAA,QAAQ,CAACU,mBAAT,CAA6B;AAC3B,mBAAW;AADgB,OAA7B;AAGAjE,MAAAA,QAAQ,CAACwD,IAAT,GAAgBE,eAAhB,CAAgCH,QAAhC,EAA0CI,IAA1C,CAA+C,UAASC,MAAT,EAAiB;AAC9D;AACA;AACA;AACA;AACArC,QAAAA,EAAE,CAACsC,WAAH;AACD,OAND;AAOD,KA9EM;AA+EP;AACAK,IAAAA,OAhFO,qBAgFG;AAAA;;AACRlE,MAAAA,QAAQ,CAACwD,IAAT,GAAgBU,OAAhB,GAA0BP,IAA1B,CAA+B,YAAM;AACnC,QAAA,KAAI,CAACE,WAAL;;AACAM,QAAAA,KAAK,CAAC,KAAD,CAAL;AACD,OAHD;AAIA,WAAKC,OAAL;AACD,KAtFM;AAuFP;AACAP,IAAAA,WAxFO,yBAwFO;AACZ,UAAMtC,EAAE,GAAG,IAAX;AACAvB,MAAAA,QAAQ,CAACwD,IAAT,GAAgBa,kBAAhB,CAAmC,UAAUC,IAAV,EAAgB;AACjD,YAAIA,IAAJ,EAAU;AACRnC,UAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAb,UAAAA,EAAE,CAACb,QAAH,GAAc,IAAd;AACAa,UAAAA,EAAE,CAACZ,GAAH,GAAS2D,IAAI,CAAC3D,GAAd;AACAY,UAAAA,EAAE,CAACD,OAAH;AACD,SALD,MAKO;AACLa,UAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAb,UAAAA,EAAE,CAACgD,SAAH;AACD;AACF,OAVD;AAWD,KArGM;AAsGPA,IAAAA,SAtGO,uBAsGK;AACV,WAAK7D,QAAL,GAAgB,KAAhB;AACA,WAAKF,QAAL,GAAgB,EAAhB;AACA,WAAKG,GAAL,GAAW,EAAX;AACD,KA1GM;;AA2GP;AACA6D,IAAAA,KA5GO,mBA4GC;AAAA;;AACN,WAAKxD,OAAL,GAAe,IAAf;AACA,WAAKD,SAAL,GAAiB0D,WAAW,CAAC,YAAM;AACjC,QAAA,MAAI,CAAC7D,SAAL,IAAkB,CAAlB;;AACA,YAAI,MAAI,CAACA,SAAL,KAAmB,CAAvB,EAA0B;AACxB8D,UAAAA,aAAa,CAAC,MAAI,CAAC3D,SAAN,CAAb;AACD;AACF,OAL2B,EAKzB,IALyB,CAA5B;AAMD,KApHM;AAqHP4D,IAAAA,IArHO,kBAqHA;AACL,WAAK3D,OAAL,GAAe,KAAf;AACA0D,MAAAA,aAAa,CAAC,KAAK3D,SAAN,CAAb;AACD,KAxHM;AAyHPqD,IAAAA,OAzHO,qBAyHG;AACR,WAAKpD,OAAL,GAAe,KAAf;AACA,WAAKJ,SAAL,GAAiB,KAAKE,OAAL,GAAe,KAAKD,OAArC;AACA6D,MAAAA,aAAa,CAAC,KAAK3D,SAAN,CAAb;AACD,KA7HM;;AA8HP;AACA;AACA6D,IAAAA,SAhIO,qBAgIG1C,KAhIH,EAgIU2C,CAhIV,EAgIa;AAClB,WAAKC,QAAL,GAAgB5C,KAAhB;AACA,WAAKhB,YAAL,GAAoB2D,CAAC,CAACE,MAAtB;AACA,WAAK7D,YAAL,CAAkB8D,SAAlB,CAA4BC,GAA5B,CAAgC,mBAAhC;AACD,KApIM;AAqIP;AACAC,IAAAA,OAtIO,mBAsICL,CAtID,EAsII;AACT,UAAIA,CAAC,CAACE,MAAF,KAAa,KAAK7D,YAAtB,EAAoC;AAClC;AACD;;AACD2D,MAAAA,CAAC,CAACE,MAAF,CAASC,SAAT,CAAmB5B,MAAnB,CAA0B,mBAA1B;AACD,KA3IM;AA4IP;AACA+B,IAAAA,OA7IO,mBA6ICN,CA7ID,EA6II;AACTA,MAAAA,CAAC,CAACE,MAAF,CAASC,SAAT,CAAmB5B,MAAnB,CAA0B,mBAA1B;AACA,WAAKgC,UAAL,CAAgB,KAAKN,QAArB,EAA+B,KAAKO,QAApC;AACD,KAhJM;AAiJP;AACAC,IAAAA,SAlJO,qBAkJGT,CAlJH,EAkJM;AACX;AACA;AACA,UAAIA,CAAC,CAACE,MAAF,KAAa,KAAK7D,YAAlB,IAAkC2D,CAAC,CAACE,MAAF,CAASQ,OAAT,KAAqB,IAA3D,EAAiE;AAC/DV,QAAAA,CAAC,CAACE,MAAF,CAASC,SAAT,CAAmBC,GAAnB,CAAuB,mBAAvB,EAA4C,kBAA5C;AACD;AACF,KAxJM;AAyJP;AACAO,IAAAA,QA1JO,oBA0JEtD,KA1JF,EA0JS2C,CA1JT,EA0JY;AACjB,WAAKQ,QAAL,GAAgBnD,KAAhB,CADiB,CAEjB;;AACA,UAAI2C,CAAC,CAACE,MAAF,KAAa,KAAK7D,YAAtB,EAAoC;AAClC2D,QAAAA,CAAC,CAACE,MAAF,CAASC,SAAT,CAAmBC,GAAnB,CAAuB,mBAAvB;AACD;AACF,KAhKM;AAiKP;AACAQ,IAAAA,SAlKO,qBAkKGZ,CAlKH,EAkKM;AACXA,MAAAA,CAAC,CAACE,MAAF,CAASC,SAAT,CAAmB5B,MAAnB,CAA0B,mBAA1B,EAA+C,kBAA/C;AACD,KApKM;AAqKPgC,IAAAA,UArKO,sBAqKIN,QArKJ,EAqKcO,QArKd,EAqKwB;AAC7B,UAAIK,UAAU,GAAG,KAAKlF,QAAL,CAAc6E,QAAd,EAAwB5E,IAAzC;AACA,UAAIkF,aAAa,GAAG,KAAKnF,QAAL,CAAc6E,QAAd,EAAwBvC,OAA5C;AACA,WAAKtC,QAAL,CAAc6E,QAAd,EAAwB5E,IAAxB,GAA+B,KAAKD,QAAL,CAAcsE,QAAd,EAAwBrE,IAAvD;AACA,WAAKD,QAAL,CAAc6E,QAAd,EAAwBvC,OAAxB,GAAkC,KAAKtC,QAAL,CAAcsE,QAAd,EAAwBhC,OAA1D;AACA,WAAKtC,QAAL,CAAcsE,QAAd,EAAwBrE,IAAxB,GAA+BiF,UAA/B;AACA,WAAKlF,QAAL,CAAcsE,QAAd,EAAwBhC,OAAxB,GAAkC6C,aAAlC;AACA,WAAKzC,aAAL;AACD;AA7KM,GArBe;AAoMxB0C,EAAAA,QAAQ,EAAE;AACR;AACAC,IAAAA,QAFQ,sBAEG;AACT,UAAIC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAW,KAAKpF,SAAL,GAAiB,EAA5B,CAAV;AACA,UAAIqF,GAAG,GAAG,KAAKrF,SAAL,GAAiB,EAA3B;;AACA,UAAMsF,UAAU,GAAG,SAAbA,UAAa,CAACC,GAAD,EAAS;AAC1B,YAAIA,GAAG,GAAG,EAAV,EAAc;AACZ,iBAAO,MAAMA,GAAb;AACD,SAFD,MAEO;AACL,iBAAOA,GAAP;AACD;AACF,OAND;;AAOA,uBAAUD,UAAU,CAACJ,GAAD,CAApB,gBAA+BI,UAAU,CAACD,GAAD,CAAzC;AACD,KAbO;AAcRG,IAAAA,SAdQ,uBAcI;AACV,aAAO,KAAK5F,QAAL,CAAc6F,MAAd,CAAqB,UAAAtE,IAAI;AAAA,eAAIA,IAAI,CAACe,OAAL,KAAiB,KAArB;AAAA,OAAzB,CAAP;AACD,KAhBO;AAiBRwD,IAAAA,YAjBQ,0BAiBO;AACb,aAAO,KAAK9F,QAAL,CAAc6F,MAAd,CAAqB,UAAAtE,IAAI;AAAA,eAAIA,IAAI,CAACe,OAAL,KAAiB,IAArB;AAAA,OAAzB,CAAP;AACD;AAnBO,GApMc;AAyNxByD,EAAAA,KAAK,EAAE;AACL3F,IAAAA,SADK,qBACK4F,QADL,EACe;AAClB,WAAKvF,OAAL,GAAe8E,IAAI,CAACC,KAAL,CAAWQ,QAAQ,IAAI,KAAK1F,OAAL,GAAe,KAAKD,OAAxB,CAAR,GAAyC,GAApD,CAAf;AACD;AAHI,GAzNiB;AA8NxB4F,EAAAA,OA9NwB,qBA8Nd;AACR,SAAKrC,OAAL;AACA,SAAKP,WAAL;AACD;AAjOuB,CAAd,EAkOT6C,KAlOS,CAkOH,MAlOG,CAAZ;;;ACjBA,IAAIC,aAAJ;;AACA,CAAC,UAAUC,eAAV,EAA2B;AACxB;AACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACI,MAAIC,YAAY,GAAI,YAAY;AAC5B,aAASA,YAAT,GAAwB;AACpB,WAAKC,WAAL,GAAmB,MAAnB;AACA,WAAKC,cAAL,GAAsB,KAAtB;AACA,WAAKC,KAAL,GAAa,EAAb;AACH;;AACDrF,IAAAA,MAAM,CAACsF,cAAP,CAAsBJ,YAAY,CAACK,SAAnC,EAA8C,YAA9C,EAA4D;AACxD;AACZ;AACA;AACA;AACYC,MAAAA,GAAG,EAAE,eAAY;AACb,eAAO,KAAKL,WAAZ;AACH,OAPuD;AAQxDrE,MAAAA,GAAG,EAAE,aAAU2E,KAAV,EAAiB;AAClB,aAAKN,WAAL,GAAmBM,KAAnB;AACH,OAVuD;AAWxDC,MAAAA,UAAU,EAAE,IAX4C;AAYxDC,MAAAA,YAAY,EAAE;AAZ0C,KAA5D;AAcA3F,IAAAA,MAAM,CAACsF,cAAP,CAAsBJ,YAAY,CAACK,SAAnC,EAA8C,eAA9C,EAA+D;AAC3D;AACZ;AACA;AACA;AACA;AACYC,MAAAA,GAAG,EAAE,eAAY;AACb,eAAO,KAAKJ,cAAZ;AACH,OAR0D;AAS3DtE,MAAAA,GAAG,EAAE,aAAU2E,KAAV,EAAiB;AAClB,aAAKL,cAAL,GAAsBK,KAAtB;AACH,OAX0D;AAY3DC,MAAAA,UAAU,EAAE,IAZ+C;AAa3DC,MAAAA,YAAY,EAAE;AAb6C,KAA/D;AAeA3F,IAAAA,MAAM,CAACsF,cAAP,CAAsBJ,YAAY,CAACK,SAAnC,EAA8C,OAA9C,EAAuD;AACnD;AACZ;AACA;AACYC,MAAAA,GAAG,EAAE,eAAY;AACb,eAAOxF,MAAM,CAAC4F,IAAP,CAAY,KAAKP,KAAjB,CAAP;AACH,OANkD;AAOnDK,MAAAA,UAAU,EAAE,IAPuC;AAQnDC,MAAAA,YAAY,EAAE;AARqC,KAAvD;AAUA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACQT,IAAAA,YAAY,CAACK,SAAb,CAAuBM,SAAvB,GAAmC,UAAUC,IAAV,EAAgB;AAC/C,UAAIA,IAAI,IAAI,IAAZ,EAAkB;AACd,eAAO,KAAKT,KAAL,CAAWS,IAAI,CAACC,WAAL,EAAX,CAAP;AACH,OAFD,MAGK;AACD,aAAKV,KAAL,GAAa,EAAb;AACH;AACJ,KAPD;AAQA;AACR;AACA;AACA;AACA;AACA;;;AACQH,IAAAA,YAAY,CAACK,SAAb,CAAuB5F,OAAvB,GAAiC,UAAUmG,IAAV,EAAgB;AAC7C,aAAO,KAAKT,KAAL,CAAWS,IAAI,CAACC,WAAL,EAAX,KAAkC,EAAzC;AACH,KAFD;AAGA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACQb,IAAAA,YAAY,CAACK,SAAb,CAAuBS,OAAvB,GAAiC,UAAUF,IAAV,EAAgBL,KAAhB,EAAuB;AACpD,WAAKJ,KAAL,CAAWS,IAAI,CAACC,WAAL,EAAX,IAAiCN,KAAjC;AACH,KAFD;AAGA;AACR;AACA;AACA;AACA;AACA;AACA;;;AACQP,IAAAA,YAAY,CAACK,SAAb,CAAuBU,YAAvB,GAAsC,UAAUC,GAAV,EAAeC,OAAf,EAAwBC,OAAxB,EAAiC;AACnE,UAAIC,GAAG,GAAGrB,aAAa,CAACsB,SAAxB;AACAD,MAAAA,GAAG,CAACE,UAAJ,GAAiBL,GAAjB;AACAG,MAAAA,GAAG,CAACG,UAAJ,GAAiB;AAAEC,QAAAA,CAAC,EAAEN,OAAL;AAAcO,QAAAA,CAAC,EAAEN;AAAjB,OAAjB;AACH,KAJD;;AAKA,WAAOlB,YAAP;AACH,GAhGmB,EAApB;;AAiGAD,EAAAA,eAAe,CAACC,YAAhB,GAA+BA,YAA/B;AACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACI,MAAIF,aAAa,GAAI,YAAY;AAC7B;AACR;AACA;AACQ,aAASA,aAAT,GAAyB;AACrB,WAAK2B,UAAL,GAAkB,CAAlB,CADqB,CAErB;;AACA,UAAI3B,aAAa,CAACsB,SAAlB,EAA6B;AACzB,cAAM,yCAAN;AACH,OALoB,CAMrB;AACA;;;AACA,UAAIM,eAAe,GAAG,KAAtB;AACAC,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,MAA1B,EAAkC,YAAY,CAAG,CAAjD,EAAmD;AAC/C,YAAIC,OAAJ,GAAc;AACVH,UAAAA,eAAe,GAAG,IAAlB;AACA,iBAAO,IAAP;AACH;;AAJ8C,OAAnD,EATqB,CAerB;;AACA,UAAII,SAAS,CAACC,cAAd,EAA8B;AAC1B,YAAIC,CAAC,GAAGL,QAAR;AAAA,YACIM,EAAE,GAAG,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CADT;AAAA,YAEIC,EAAE,GAAG,KAAKC,UAAL,CAAgBF,IAAhB,CAAqB,IAArB,CAFT;AAAA,YAGIG,EAAE,GAAG,KAAKC,SAAL,CAAeJ,IAAf,CAAoB,IAApB,CAHT;AAAA,YAIIK,GAAG,GAAGd,eAAe,GAAG;AAAEG,UAAAA,OAAO,EAAE,KAAX;AAAkBY,UAAAA,OAAO,EAAE;AAA3B,SAAH,GAAwC,KAJjE;;AAKAT,QAAAA,CAAC,CAACJ,gBAAF,CAAmB,YAAnB,EAAiCK,EAAjC,EAAqCO,GAArC;AACAR,QAAAA,CAAC,CAACJ,gBAAF,CAAmB,WAAnB,EAAgCQ,EAAhC,EAAoCI,GAApC;AACAR,QAAAA,CAAC,CAACJ,gBAAF,CAAmB,UAAnB,EAA+BU,EAA/B;AACAN,QAAAA,CAAC,CAACJ,gBAAF,CAAmB,aAAnB,EAAkCU,EAAlC;AACH;AACJ;AACD;AACR;AACA;;;AACQxC,IAAAA,aAAa,CAAC4C,WAAd,GAA4B,YAAY;AACpC,aAAO5C,aAAa,CAACsB,SAArB;AACH,KAFD,CAnC6B,CAsC7B;;;AACAtB,IAAAA,aAAa,CAACO,SAAd,CAAwB6B,WAAxB,GAAsC,UAAUlE,CAAV,EAAa;AAC/C,UAAI2E,KAAK,GAAG,IAAZ;;AACA,UAAI,KAAKC,aAAL,CAAmB5E,CAAnB,CAAJ,EAA2B;AACvB;AACA,YAAIlC,IAAI,CAAC+G,GAAL,KAAa,KAAKpB,UAAlB,GAA+B3B,aAAa,CAACgD,SAAjD,EAA4D;AACxD,cAAI,KAAKC,cAAL,CAAoB/E,CAApB,EAAuB,UAAvB,EAAmCA,CAAC,CAACE,MAArC,CAAJ,EAAkD;AAC9CF,YAAAA,CAAC,CAACgF,cAAF;;AACA,iBAAKC,MAAL;;AACA;AACH;AACJ,SARsB,CASvB;;;AACA,aAAKA,MAAL,GAVuB,CAWvB;;;AACA,YAAIC,GAAG,GAAG,KAAKC,iBAAL,CAAuBnF,CAAC,CAACE,MAAzB,CAAV;;AACA,YAAIgF,GAAJ,EAAS;AACL;AACA,cAAI,CAAC,KAAKH,cAAL,CAAoB/E,CAApB,EAAuB,WAAvB,EAAoCA,CAAC,CAACE,MAAtC,CAAD,IACA,CAAC,KAAK6E,cAAL,CAAoB/E,CAApB,EAAuB,WAAvB,EAAoCA,CAAC,CAACE,MAAtC,CADL,EACoD;AAChD;AACA,iBAAKkF,WAAL,GAAmBF,GAAnB;AACA,iBAAKG,OAAL,GAAe,KAAKC,SAAL,CAAetF,CAAf,CAAf;AACA,iBAAKuF,UAAL,GAAkBvF,CAAlB;AACAA,YAAAA,CAAC,CAACgF,cAAF,GALgD,CAMhD;;AACAQ,YAAAA,UAAU,CAAC,YAAY;AACnB,kBAAIb,KAAK,CAACS,WAAN,IAAqBF,GAArB,IAA4BP,KAAK,CAACc,IAAN,IAAc,IAA9C,EAAoD;AAChD,oBAAId,KAAK,CAACI,cAAN,CAAqB/E,CAArB,EAAwB,aAAxB,EAAuCkF,GAAvC,CAAJ,EAAiD;AAC7CP,kBAAAA,KAAK,CAACM,MAAN;AACH;AACJ;AACJ,aANS,EAMPnD,aAAa,CAAC4D,QANP,CAAV;;AAOA,gBAAI5D,aAAa,CAAC6D,gBAAlB,EAAoC;AAChC,mBAAKC,kBAAL,GAA0BJ,UAAU,CAAC,YAAY;AAC7Cb,gBAAAA,KAAK,CAACkB,cAAN,GAAuB,IAAvB;;AACAlB,gBAAAA,KAAK,CAACN,UAAN,CAAiBrE,CAAjB;AACH,eAHmC,EAGjC8B,aAAa,CAACgE,eAHmB,CAApC;AAIH;AACJ;AACJ;AACJ;AACJ,KAzCD;;AA0CAhE,IAAAA,aAAa,CAACO,SAAd,CAAwBgC,UAAxB,GAAqC,UAAUrE,CAAV,EAAa;AAC9C,UAAI,KAAK+F,0BAAL,CAAgC/F,CAAhC,CAAJ,EAAwC;AACtC,aAAKiF,MAAL;;AACA;AACD;;AACD,UAAI,KAAKe,iBAAL,CAAuBhG,CAAvB,KAA6B,KAAKiG,0BAAL,CAAgCjG,CAAhC,CAAjC,EAAqE;AACjE;AACA,YAAIE,MAAM,GAAG,KAAKgG,UAAL,CAAgBlG,CAAhB,CAAb;;AACA,YAAI,KAAK+E,cAAL,CAAoB/E,CAApB,EAAuB,WAAvB,EAAoCE,MAApC,CAAJ,EAAiD;AAC7C,eAAKqF,UAAL,GAAkBvF,CAAlB;AACAA,UAAAA,CAAC,CAACgF,cAAF;AACA;AACH,SAPgE,CAQjE;;;AACA,YAAI,KAAKI,WAAL,IAAoB,CAAC,KAAKK,IAA1B,IAAkC,KAAKU,oBAAL,CAA0BnG,CAA1B,CAAtC,EAAoE;AAChE,eAAK+E,cAAL,CAAoB/E,CAApB,EAAuB,WAAvB,EAAoC,KAAKoF,WAAzC;;AACA,eAAKgB,YAAL,CAAkBpG,CAAlB;;AACA,eAAK+E,cAAL,CAAoB/E,CAApB,EAAuB,WAAvB,EAAoCE,MAApC;AACH,SAbgE,CAcjE;;;AACA,YAAI,KAAKuF,IAAT,EAAe;AACX,eAAKF,UAAL,GAAkBvF,CAAlB;AACAA,UAAAA,CAAC,CAACgF,cAAF,GAFW,CAES;;AACpB,eAAKD,cAAL,CAAoB/E,CAApB,EAAuB,MAAvB,EAA+B,KAAKoF,WAApC;;AACA,cAAIlF,MAAM,IAAI,KAAKmG,WAAnB,EAAgC;AAC5B,iBAAKtB,cAAL,CAAoB,KAAKQ,UAAzB,EAAqC,WAArC,EAAkD,KAAKc,WAAvD;;AACA,iBAAKtB,cAAL,CAAoB/E,CAApB,EAAuB,WAAvB,EAAoCE,MAApC;;AACA,iBAAKmG,WAAL,GAAmBnG,MAAnB;AACH;;AACD,eAAKoG,UAAL,CAAgBtG,CAAhB;;AACA,eAAKuG,WAAL,GAAmB,KAAKxB,cAAL,CAAoB/E,CAApB,EAAuB,UAAvB,EAAmCE,MAAnC,CAAnB;AACH;AACJ;AACJ,KAjCD;;AAkCA4B,IAAAA,aAAa,CAACO,SAAd,CAAwBkC,SAAxB,GAAoC,UAAUvE,CAAV,EAAa;AAC7C,UAAI,KAAK4E,aAAL,CAAmB5E,CAAnB,CAAJ,EAA2B;AACvB;AACA,YAAI,KAAK+E,cAAL,CAAoB,KAAKQ,UAAzB,EAAqC,SAArC,EAAgDvF,CAAC,CAACE,MAAlD,CAAJ,EAA+D;AAC3DF,UAAAA,CAAC,CAACgF,cAAF;AACA;AACH,SALsB,CAMvB;;;AACA,YAAI,CAAC,KAAKS,IAAV,EAAgB;AACZ,eAAKL,WAAL,GAAmB,IAAnB;;AACA,eAAKL,cAAL,CAAoB,KAAKQ,UAAzB,EAAqC,OAArC,EAA8CvF,CAAC,CAACE,MAAhD;;AACA,eAAKuD,UAAL,GAAkB3F,IAAI,CAAC+G,GAAL,EAAlB;AACH,SAXsB,CAYvB;;;AACA,aAAK2B,aAAL;;AACA,YAAI,KAAKpB,WAAT,EAAsB;AAClB,cAAIpF,CAAC,CAAC4C,IAAF,CAAO6D,OAAP,CAAe,QAAf,IAA2B,CAA3B,IAAgC,KAAKF,WAAzC,EAAsD;AAClD,iBAAKxB,cAAL,CAAoB,KAAKQ,UAAzB,EAAqC,MAArC,EAA6C,KAAKc,WAAlD;AACH;;AACD,eAAKtB,cAAL,CAAoB,KAAKQ,UAAzB,EAAqC,SAArC,EAAgD,KAAKH,WAArD;;AACA,eAAKH,MAAL;AACH;AACJ;AACJ,KAvBD,CAnH6B,CA2I7B;AACA;;;AACAnD,IAAAA,aAAa,CAACO,SAAd,CAAwBuC,aAAxB,GAAwC,UAAU5E,CAAV,EAAa;AACjD,aAAOA,CAAC,IACJ,CAACA,CAAC,CAAC0G,gBADA,IAEH1G,CAAC,CAAC2G,OAFC,IAEU3G,CAAC,CAAC2G,OAAF,CAAU3I,MAAV,GAAmB,CAFpC;AAGH,KAJD,CA7I6B,CAmJ7B;;;AACA8D,IAAAA,aAAa,CAACO,SAAd,CAAwB2D,iBAAxB,GAA4C,UAAUhG,CAAV,EAAa;AACvD,aAAO,CAAC8B,aAAa,CAAC6D,gBAAf,IAAmC,KAAKf,aAAL,CAAmB5E,CAAnB,CAA1C;AACD,KAFD,CApJ6B,CAwJ7B;;;AACA8B,IAAAA,aAAa,CAACO,SAAd,CAAwB4D,0BAAxB,GAAqD,UAAUjG,CAAV,EAAa;AAChE,aAAO8B,aAAa,CAAC6D,gBAAd,IACH,KAAKE,cADF,IACoB7F,CADpB,IACyBA,CAAC,CAAC2G,OAD3B,IACsC3G,CAAC,CAAC2G,OAAF,CAAU3I,MADvD;AAED,KAHD,CAzJ6B,CA8J7B;;;AACA8D,IAAAA,aAAa,CAACO,SAAd,CAAwB0D,0BAAxB,GAAqD,UAAU/F,CAAV,EAAa;AAChE,aAAO8B,aAAa,CAAC6D,gBAAd,IAAkC,CAAC,KAAKE,cAAxC,IACH,KAAKe,SAAL,CAAe5G,CAAf,IAAoB8B,aAAa,CAAC+E,gBADtC;AAED,KAHD,CA/J6B,CAoK7B;;;AACA/E,IAAAA,aAAa,CAACO,SAAd,CAAwB8D,oBAAxB,GAA+C,UAAUnG,CAAV,EAAa;AACxD,UAAI8G,KAAK,GAAG,KAAKF,SAAL,CAAe5G,CAAf,CAAZ;;AACA,aAAO8G,KAAK,GAAGhF,aAAa,CAACiF,UAAtB,IACFjF,aAAa,CAAC6D,gBAAd,IAAkCmB,KAAK,IAAIhF,aAAa,CAACkF,mBAD9D;AAEH,KAJD,CArK6B,CA2K7B;;;AACAlF,IAAAA,aAAa,CAACO,SAAd,CAAwB4C,MAAxB,GAAiC,YAAY;AACzC,WAAKuB,aAAL;;AACA,WAAKpB,WAAL,GAAmB,IAAnB;AACA,WAAKG,UAAL,GAAkB,IAAlB;AACA,WAAKc,WAAL,GAAmB,IAAnB;AACA,WAAKhB,OAAL,GAAe,IAAf;AACA,WAAKQ,cAAL,GAAsB,KAAtB;AACA,WAAKU,WAAL,GAAmB,KAAnB;AACA,WAAKU,aAAL,GAAqB,IAAIjF,YAAJ,EAArB;AACAnC,MAAAA,aAAa,CAAC,KAAK+F,kBAAN,CAAb;AACH,KAVD,CA5K6B,CAuL7B;;;AACA9D,IAAAA,aAAa,CAACO,SAAd,CAAwBiD,SAAxB,GAAoC,UAAUtF,CAAV,EAAakH,IAAb,EAAmB;AACnD,UAAIlH,CAAC,IAAIA,CAAC,CAAC2G,OAAX,EAAoB;AAChB3G,QAAAA,CAAC,GAAGA,CAAC,CAAC2G,OAAF,CAAU,CAAV,CAAJ;AACH;;AACD,aAAO;AAAEpD,QAAAA,CAAC,EAAE2D,IAAI,GAAGlH,CAAC,CAACmH,KAAL,GAAanH,CAAC,CAACoH,OAAxB;AAAiC5D,QAAAA,CAAC,EAAE0D,IAAI,GAAGlH,CAAC,CAACqH,KAAL,GAAarH,CAAC,CAACsH;AAAvD,OAAP;AACH,KALD,CAxL6B,CA8L7B;;;AACAxF,IAAAA,aAAa,CAACO,SAAd,CAAwBuE,SAAxB,GAAoC,UAAU5G,CAAV,EAAa;AAC7C,UAAI8B,aAAa,CAAC6D,gBAAd,IAAkC,CAAC,KAAKN,OAA5C,EAAqD;AAAE,eAAO,CAAP;AAAW;;AAClE,UAAIkC,CAAC,GAAG,KAAKjC,SAAL,CAAetF,CAAf,CAAR;;AACA,aAAOkB,IAAI,CAACsG,GAAL,CAASD,CAAC,CAAChE,CAAF,GAAM,KAAK8B,OAAL,CAAa9B,CAA5B,IAAiCrC,IAAI,CAACsG,GAAL,CAASD,CAAC,CAAC/D,CAAF,GAAM,KAAK6B,OAAL,CAAa7B,CAA5B,CAAxC;AACH,KAJD,CA/L6B,CAoM7B;;;AACA1B,IAAAA,aAAa,CAACO,SAAd,CAAwB6D,UAAxB,GAAqC,UAAUlG,CAAV,EAAa;AAC9C,UAAIyH,EAAE,GAAG,KAAKnC,SAAL,CAAetF,CAAf,CAAT;AAAA,UAA4B0H,EAAE,GAAG/D,QAAQ,CAACgE,gBAAT,CAA0BF,EAAE,CAAClE,CAA7B,EAAgCkE,EAAE,CAACjE,CAAnC,CAAjC;;AACA,aAAOkE,EAAE,IAAIE,gBAAgB,CAACF,EAAD,CAAhB,CAAqBG,aAArB,IAAsC,MAAnD,EAA2D;AACvDH,QAAAA,EAAE,GAAGA,EAAE,CAACI,aAAR;AACH;;AACD,aAAOJ,EAAP;AACH,KAND,CArM6B,CA4M7B;;;AACA5F,IAAAA,aAAa,CAACO,SAAd,CAAwB+D,YAAxB,GAAuC,UAAUpG,CAAV,EAAa;AAChD;AACA,UAAI,KAAKyF,IAAT,EAAe;AACX,aAAKe,aAAL;AACH,OAJ+C,CAKhD;;;AACA,UAAItB,GAAG,GAAG,KAAK7B,UAAL,IAAmB,KAAK+B,WAAlC;AACA,WAAKK,IAAL,GAAYP,GAAG,CAAC6C,SAAJ,CAAc,IAAd,CAAZ;;AACA,WAAKC,UAAL,CAAgB9C,GAAhB,EAAqB,KAAKO,IAA1B;;AACA,WAAKA,IAAL,CAAUwC,KAAV,CAAgBC,GAAhB,GAAsB,KAAKzC,IAAL,CAAUwC,KAAV,CAAgBE,IAAhB,GAAuB,SAA7C,CATgD,CAUhD;;AACA,UAAI,CAAC,KAAK9E,UAAV,EAAsB;AAClB,YAAI+E,EAAE,GAAGlD,GAAG,CAACmD,qBAAJ,EAAT;AAAA,YAAsCZ,EAAE,GAAG,KAAKnC,SAAL,CAAetF,CAAf,CAA3C;;AACA,aAAKsD,UAAL,GAAkB;AAAEC,UAAAA,CAAC,EAAEkE,EAAE,CAAClE,CAAH,GAAO6E,EAAE,CAACD,IAAf;AAAqB3E,UAAAA,CAAC,EAAEiE,EAAE,CAACjE,CAAH,GAAO4E,EAAE,CAACF;AAAlC,SAAlB;AACA,aAAKzC,IAAL,CAAUwC,KAAV,CAAgBK,OAAhB,GAA0BxG,aAAa,CAACyG,QAAd,CAAuBC,QAAvB,EAA1B;AACH,OAf+C,CAgBhD;;;AACA,WAAKlC,UAAL,CAAgBtG,CAAhB;;AACA2D,MAAAA,QAAQ,CAAC8E,IAAT,CAAcC,WAAd,CAA0B,KAAKjD,IAA/B;AACH,KAnBD,CA7M6B,CAiO7B;;;AACA3D,IAAAA,aAAa,CAACO,SAAd,CAAwBmE,aAAxB,GAAwC,YAAY;AAChD,UAAI,KAAKf,IAAL,IAAa,KAAKA,IAAL,CAAUqC,aAA3B,EAA0C;AACtC,aAAKrC,IAAL,CAAUqC,aAAV,CAAwBa,WAAxB,CAAoC,KAAKlD,IAAzC;AACH;;AACD,WAAKA,IAAL,GAAY,IAAZ;AACA,WAAKpC,UAAL,GAAkB,IAAlB;AACH,KAND,CAlO6B,CAyO7B;;;AACAvB,IAAAA,aAAa,CAACO,SAAd,CAAwBiE,UAAxB,GAAqC,UAAUtG,CAAV,EAAa;AAC9C,UAAI2E,KAAK,GAAG,IAAZ;;AACAiE,MAAAA,qBAAqB,CAAC,YAAY;AAC9B,YAAIjE,KAAK,CAACc,IAAV,EAAgB;AACZ,cAAIgC,EAAE,GAAG9C,KAAK,CAACW,SAAN,CAAgBtF,CAAhB,EAAmB,IAAnB,CAAT;AAAA,cAAmC6I,CAAC,GAAGlE,KAAK,CAACc,IAAN,CAAWwC,KAAlD;;AACAY,UAAAA,CAAC,CAACC,QAAF,GAAa,UAAb;AACAD,UAAAA,CAAC,CAAChB,aAAF,GAAkB,MAAlB;AACAgB,UAAAA,CAAC,CAACE,MAAF,GAAW,QAAX;AACAF,UAAAA,CAAC,CAACV,IAAF,GAASjH,IAAI,CAAC8H,KAAL,CAAWvB,EAAE,CAAClE,CAAH,GAAOoB,KAAK,CAACrB,UAAN,CAAiBC,CAAnC,IAAwC,IAAjD;AACAsF,UAAAA,CAAC,CAACX,GAAF,GAAQhH,IAAI,CAAC8H,KAAL,CAAWvB,EAAE,CAACjE,CAAH,GAAOmB,KAAK,CAACrB,UAAN,CAAiBE,CAAnC,IAAwC,IAAhD;AACH;AACJ,OAToB,CAArB;AAUH,KAZD,CA1O6B,CAuP7B;;;AACA1B,IAAAA,aAAa,CAACO,SAAd,CAAwB4G,UAAxB,GAAqC,UAAUC,GAAV,EAAehE,GAAf,EAAoBiE,KAApB,EAA2B;AAC5D,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACnL,MAA1B,EAAkCoL,CAAC,EAAnC,EAAuC;AACnC,YAAI7B,CAAC,GAAG4B,KAAK,CAACC,CAAD,CAAb;AACAF,QAAAA,GAAG,CAAC3B,CAAD,CAAH,GAASrC,GAAG,CAACqC,CAAD,CAAZ;AACH;AACJ,KALD;;AAMAzF,IAAAA,aAAa,CAACO,SAAd,CAAwB2F,UAAxB,GAAqC,UAAU9C,GAAV,EAAegE,GAAf,EAAoB;AACrD;AACApH,MAAAA,aAAa,CAACuH,QAAd,CAAuBpM,OAAvB,CAA+B,UAAUqM,GAAV,EAAe;AAC1CJ,QAAAA,GAAG,CAACK,eAAJ,CAAoBD,GAApB;AACH,OAFD,EAFqD,CAKrD;;;AACA,UAAIpE,GAAG,YAAYsE,iBAAnB,EAAsC;AAClC,YAAIC,IAAI,GAAGvE,GAAX;AAAA,YAAgBwE,IAAI,GAAGR,GAAvB;AACAQ,QAAAA,IAAI,CAACC,KAAL,GAAaF,IAAI,CAACE,KAAlB;AACAD,QAAAA,IAAI,CAACE,MAAL,GAAcH,IAAI,CAACG,MAAnB;AACAF,QAAAA,IAAI,CAACG,UAAL,CAAgB,IAAhB,EAAsBC,SAAtB,CAAgCL,IAAhC,EAAsC,CAAtC,EAAyC,CAAzC;AACH,OAXoD,CAYrD;;;AACA,UAAIM,EAAE,GAAGnC,gBAAgB,CAAC1C,GAAD,CAAzB;;AACA,WAAK,IAAIkE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGW,EAAE,CAAC/L,MAAvB,EAA+BoL,CAAC,EAAhC,EAAoC;AAChC,YAAI1L,GAAG,GAAGqM,EAAE,CAACX,CAAD,CAAZ;;AACA,YAAI1L,GAAG,CAAC+I,OAAJ,CAAY,YAAZ,IAA4B,CAAhC,EAAmC;AAC/ByC,UAAAA,GAAG,CAACjB,KAAJ,CAAUvK,GAAV,IAAiBqM,EAAE,CAACrM,GAAD,CAAnB;AACH;AACJ;;AACDwL,MAAAA,GAAG,CAACjB,KAAJ,CAAUJ,aAAV,GAA0B,MAA1B,CApBqD,CAqBrD;;AACA,WAAK,IAAIuB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGlE,GAAG,CAAC8E,QAAJ,CAAahM,MAAjC,EAAyCoL,CAAC,EAA1C,EAA8C;AAC1C,aAAKpB,UAAL,CAAgB9C,GAAG,CAAC8E,QAAJ,CAAaZ,CAAb,CAAhB,EAAiCF,GAAG,CAACc,QAAJ,CAAaZ,CAAb,CAAjC;AACH;AACJ,KAzBD;;AA0BAtH,IAAAA,aAAa,CAACO,SAAd,CAAwB0C,cAAxB,GAAyC,UAAU/E,CAAV,EAAa4C,IAAb,EAAmB1C,MAAnB,EAA2B;AAChE,UAAIF,CAAC,IAAIE,MAAT,EAAiB;AACb,YAAI+J,GAAG,GAAGtG,QAAQ,CAACuG,WAAT,CAAqB,OAArB,CAAV;AAAA,YAAyCC,CAAC,GAAGnK,CAAC,CAAC2G,OAAF,GAAY3G,CAAC,CAAC2G,OAAF,CAAU,CAAV,CAAZ,GAA2B3G,CAAxE;AACAiK,QAAAA,GAAG,CAACG,SAAJ,CAAcxH,IAAd,EAAoB,IAApB,EAA0B,IAA1B;AACAqH,QAAAA,GAAG,CAACI,MAAJ,GAAa,CAAb;AACAJ,QAAAA,GAAG,CAACK,KAAJ,GAAYL,GAAG,CAACM,OAAJ,GAAc,CAA1B;;AACA,aAAKtB,UAAL,CAAgBgB,GAAhB,EAAqBjK,CAArB,EAAwB8B,aAAa,CAAC0I,SAAtC;;AACA,aAAKvB,UAAL,CAAgBgB,GAAhB,EAAqBE,CAArB,EAAwBrI,aAAa,CAAC2I,QAAtC;;AACAR,QAAAA,GAAG,CAACS,YAAJ,GAAmB,KAAKzD,aAAxB;AACA/G,QAAAA,MAAM,CAACyK,aAAP,CAAqBV,GAArB;AACA,eAAOA,GAAG,CAACvD,gBAAX;AACH;;AACD,aAAO,KAAP;AACH,KAbD,CAxR6B,CAsS7B;;;AACA5E,IAAAA,aAAa,CAACO,SAAd,CAAwB8C,iBAAxB,GAA4C,UAAUnF,CAAV,EAAa;AACrD,aAAOA,CAAP,EAAUA,CAAC,GAAGA,CAAC,CAAC8H,aAAhB,EAA+B;AAC3B,YAAI9H,CAAC,CAAC4K,YAAF,CAAe,WAAf,KAA+B5K,CAAC,CAAC6K,SAArC,EAAgD;AAC5C,iBAAO7K,CAAP;AACH;AACJ;;AACD,aAAO,IAAP;AACH,KAPD;;AAQA,WAAO8B,aAAP;AACH,GAhToB,EAArB;AAiTA;;;AAAYA,EAAAA,aAAa,CAACsB,SAAd,GAA0B,IAAItB,aAAJ,EAA1B,CAjbY,CAibmC;AAC3D;;AACAA,EAAAA,aAAa,CAACiF,UAAd,GAA2B,CAA3B,CAnbwB,CAmbM;;AAC9BjF,EAAAA,aAAa,CAACyG,QAAd,GAAyB,GAAzB,CApbwB,CAobM;;AAC9BzG,EAAAA,aAAa,CAACgD,SAAd,GAA0B,GAA1B,CArbwB,CAqbO;;AAC/BhD,EAAAA,aAAa,CAAC4D,QAAd,GAAyB,GAAzB,CAtbwB,CAsbM;;AAC9B5D,EAAAA,aAAa,CAAC6D,gBAAd,GAAiC,KAAjC,CAvbwB,CAubgB;;AACxC7D,EAAAA,aAAa,CAACgE,eAAd,GAAgC,GAAhC,CAxbwB,CAwba;;AACrChE,EAAAA,aAAa,CAAC+E,gBAAd,GAAiC,EAAjC,CAzbwB,CAyba;;AACrC/E,EAAAA,aAAa,CAACkF,mBAAd,GAAoC,CAApC,CA1bwB,CA0be;AACvC;;AACAlF,EAAAA,aAAa,CAACuH,QAAd,GAAyB,2BAA2ByB,KAA3B,CAAiC,GAAjC,CAAzB,CA5bwB,CA6bxB;AACA;;AACAhJ,EAAAA,aAAa,CAAC0I,SAAd,GAA0B,kCAAkCM,KAAlC,CAAwC,GAAxC,CAA1B;AACAhJ,EAAAA,aAAa,CAAC2I,QAAd,GAAyB,8DAA8DK,KAA9D,CAAoE,GAApE,CAAzB;AACA/I,EAAAA,eAAe,CAACD,aAAhB,GAAgCA,aAAhC;AACH,CAlcD,EAkcGA,aAAa,KAAKA,aAAa,GAAG,EAArB,CAlchB","file":"all.js","sourcesContent":["// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD1NqNVJuZyWRWTIn6JPFWDv3E7cPZdjws\",\n  authDomain: \"to-do-list-21e2c.firebaseapp.com\",\n  databaseURL: \"https://to-do-list-21e2c-default-rtdb.firebaseio.com\",\n  projectId: \"to-do-list-21e2c\",\n  storageBucket: \"to-do-list-21e2c.appspot.com\",\n  messagingSenderId: \"174717852507\",\n  appId: \"1:174717852507:web:305e301fdb95df65d0d87e\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\n// firebase 資料庫\nconst db = firebase.database();\n\n// Vue\nconst app = Vue.createApp({\n  data() {\n    return {\n      // toDoList\n      toDoList: [],\n      toDo: '',\n      hasLogin: false,\n      uid: '',\n      totalTime: 0,\n      // 番茄鐘\n      seconds: 60,\n      minutes : 25,\n      countDown: null,\n      started: false,\n      percent: 0,\n      // 拖曳元素\n      targetSource: '',\n      newIndex: '',\n      oldIndex: ''\n    }\n  },\n  methods: {\n    /* toDoList */\n    getData() {\n      const vm = this;\n      // 取得屬性值\n      db.ref(`${vm.uid}`).on('value', (snapshot) => {\n        vm.toDoList = [];\n        Object.entries(snapshot.val() || {}).forEach((item, index) => {\n          vm.toDoList.push(item[1]);\n          vm.toDoList[index].order = index;\n        })\n        console.log(vm.toDoList);\n      })\n    },\n    postData() {\n      if (!this.toDo.trim()) {\n        return;\n      }\n      // 取得推送亂數 ID\n      const key = db.ref(`${this.uid}`).push().key;\n\n      // 推送，在子層建立資料\n      db.ref(`${this.uid}`).child(key).set({\n        // 加入相同 key 值，方便刪除\n        key: key,\n        toDo: this.toDo,\n        date: new Date().getTime(),\n        order: this.toDoList.length + 1,\n        checked: false,\n      })\n      this.toDo = '';\n    },\n    updateChecked(item) {\n      let tempObj = item;\n      tempObj.checked = !tempObj.checked;\n      db.ref(`${this.uid}`).child(item.key).update(tempObj);\n    },\n    updateDataAll() {\n      let tempObj = {};\n      this.toDoList.forEach(item => {\n        tempObj[item.key] = item;\n      })\n      db.ref(`${this.uid}`).update(tempObj);\n      this.getData();\n    },\n    deleteData(key) {\n      db.ref(`${this.uid}`).child(key).remove();\n      this.updateDataAll();\n    },\n    deleteAll() {\n      db.ref(`${this.uid}`).remove();\n    },\n    // google 登入\n    googleLogin() {\n      const provider = new firebase.auth.GoogleAuthProvider();\n      const vm = this;\n      firebase.auth().signInWithPopup(provider).then(function (result) {\n        // 可以獲得 Google 提供 token，token可透過 Google API 獲得其他數據。\n        // const credential = result.credential;\n        // const token = result.credential.accessToken;\n        // const user = result.user;\n        vm.onAuthState();\n      });\n    },\n    facebookLogin() {\n      const provider = new firebase.auth.FacebookAuthProvider();\n      const vm = this;\n      provider.addScope('user_birthday');\n      provider.setCustomParameters({\n        'display': 'popup'\n      }); \n      firebase.auth().signInWithPopup(provider).then(function(result) {\n        // 取得FB Token，可以使用於FB API中\n        // const token = result.credential.accessToken;\n        // 使用者資料\n        // const FBUser = result.user;\n        vm.onAuthState();\n      })\n    },\n    // 登出\n    signOut() {\n      firebase.auth().signOut().then(() => {\n        this.onAuthState();\n        alert('已登出');\n      })\n      this.reStart();\n    },\n    // 監聽登入狀態\n    onAuthState() {\n      const vm = this;\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          console.log(\"User is logined\")\n          vm.hasLogin = true;\n          vm.uid = user.uid;\n          vm.getData();\n        } else {\n          console.log(\"User is not logined yet.\");\n          vm.cleanData();\n        }\n      });\n    },\n    cleanData() {\n      this.hasLogin = false;\n      this.toDoList = {};\n      this.uid = '';\n    },\n    /* 番茄鐘 */\n    start() {\n      this.started = true;\n      this.countDown = setInterval(() => {\n        this.totalTime -= 1;\n        if (this.totalTime === 0) {\n          clearInterval(this.countDown);\n        }\n      }, 1000);\n    },\n    stop() {\n      this.started = false;\n      clearInterval(this.countDown);\n    },\n    reStart() {\n      this.started = false;\n      this.totalTime = this.minutes * this.seconds;\n      clearInterval(this.countDown);\n    },\n    /* 拖曳元素 */\n    // 開始拖曳，指得是要被拖曳的物件\n    dragStart(order, e) {\n      this.oldOrder = order;\n      this.targetSource = e.target;\n      this.targetSource.classList.add('list-group--hover');\n    },\n    // 放至有效的目標容器\n    dropped(e) {\n      if (e.target === this.targetSource) {\n        return ;\n      }\n      e.target.classList.remove('list-group--hover');\n    },\n    // 拖曳結束，譬如放開滑鼠時，鍵盤 keyup 時\n    dragEnd(e) {\n      e.target.classList.remove('list-group--hover');\n      this.changeData(this.oldOrder, this.newOrder);\n    },\n    // 進入目標容器\n    dragEnter(e) {\n      // 狀態很快會變成\"經過容器\"\n      // 當不是原本的目標容器時，變化 CSS 效果\n      if (e.target !== this.targetSource && e.target.tagName === 'LI') {\n        e.target.classList.add('list-group--hover', 'list-group--over')\n      }\n    },\n    // 經過目標容器\n    dragOver(order, e) {\n      this.newOrder = order;\n      // 讓拖回原本的目標容器也會有 CSS 效果\n      if (e.target === this.targetSource) {\n        e.target.classList.add('list-group--hover')\n      }\n    },\n    // 離開容器\n    dragLeave(e) {\n      e.target.classList.remove('list-group--hover', 'list-group--over')\n    },\n    changeData(oldOrder, newOrder) {\n      let originToDo = this.toDoList[newOrder].toDo; \n      let originChecked = this.toDoList[newOrder].checked; \n      this.toDoList[newOrder].toDo = this.toDoList[oldOrder].toDo\n      this.toDoList[newOrder].checked = this.toDoList[oldOrder].checked\n      this.toDoList[oldOrder].toDo = originToDo;\n      this.toDoList[oldOrder].checked = originChecked;\n      this.updateDataAll();\n    },\n  },\n  computed: {\n    // 格式化剩餘時間\n    timeLeft() {\n      let min = Math.floor(this.totalTime / 60);\n      let sec = this.totalTime % 60;\n      const formatTime = (num) => {\n        if (num < 10) {\n          return '0' + num;\n        } else {\n          return num\n        }\n      }\n      return `${formatTime(min)} : ${formatTime(sec)}`;\n    },\n    awaitData() {\n      return this.toDoList.filter(item => item.checked === false);\n    },\n    finishedData() {\n      return this.toDoList.filter(item => item.checked === true);\n    },\n  },\n  watch: {\n    totalTime(newValue) {\n      this.percent = Math.floor(newValue / (this.minutes * this.seconds)*100);\n    }\n  },\n  mounted() {\n    this.reStart();\n    this.onAuthState();\n  },\n}).mount('#app');","var DragDropTouch;\n(function (DragDropTouch_1) {\n    'use strict';\n    /**\n     * Object used to hold the data that is being dragged during drag and drop operations.\n     *\n     * It may hold one or more data items of different types. For more information about\n     * drag and drop operations and data transfer objects, see\n     * <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer\">HTML Drag and Drop API</a>.\n     *\n     * This object is created automatically by the @see:DragDropTouch singleton and is\n     * accessible through the @see:dataTransfer property of all drag events.\n     */\n    var DataTransfer = (function () {\n        function DataTransfer() {\n            this._dropEffect = 'move';\n            this._effectAllowed = 'all';\n            this._data = {};\n        }\n        Object.defineProperty(DataTransfer.prototype, \"dropEffect\", {\n            /**\n             * Gets or sets the type of drag-and-drop operation currently selected.\n             * The value must be 'none',  'copy',  'link', or 'move'.\n             */\n            get: function () {\n                return this._dropEffect;\n            },\n            set: function (value) {\n                this._dropEffect = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(DataTransfer.prototype, \"effectAllowed\", {\n            /**\n             * Gets or sets the types of operations that are possible.\n             * Must be one of 'none', 'copy', 'copyLink', 'copyMove', 'link',\n             * 'linkMove', 'move', 'all' or 'uninitialized'.\n             */\n            get: function () {\n                return this._effectAllowed;\n            },\n            set: function (value) {\n                this._effectAllowed = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(DataTransfer.prototype, \"types\", {\n            /**\n             * Gets an array of strings giving the formats that were set in the @see:dragstart event.\n             */\n            get: function () {\n                return Object.keys(this._data);\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * Removes the data associated with a given type.\n         *\n         * The type argument is optional. If the type is empty or not specified, the data\n         * associated with all types is removed. If data for the specified type does not exist,\n         * or the data transfer contains no data, this method will have no effect.\n         *\n         * @param type Type of data to remove.\n         */\n        DataTransfer.prototype.clearData = function (type) {\n            if (type != null) {\n                delete this._data[type.toLowerCase()];\n            }\n            else {\n                this._data = {};\n            }\n        };\n        /**\n         * Retrieves the data for a given type, or an empty string if data for that type does\n         * not exist or the data transfer contains no data.\n         *\n         * @param type Type of data to retrieve.\n         */\n        DataTransfer.prototype.getData = function (type) {\n            return this._data[type.toLowerCase()] || '';\n        };\n        /**\n         * Set the data for a given type.\n         *\n         * For a list of recommended drag types, please see\n         * https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Recommended_Drag_Types.\n         *\n         * @param type Type of data to add.\n         * @param value Data to add.\n         */\n        DataTransfer.prototype.setData = function (type, value) {\n            this._data[type.toLowerCase()] = value;\n        };\n        /**\n         * Set the image to be used for dragging if a custom one is desired.\n         *\n         * @param img An image element to use as the drag feedback image.\n         * @param offsetX The horizontal offset within the image.\n         * @param offsetY The vertical offset within the image.\n         */\n        DataTransfer.prototype.setDragImage = function (img, offsetX, offsetY) {\n            var ddt = DragDropTouch._instance;\n            ddt._imgCustom = img;\n            ddt._imgOffset = { x: offsetX, y: offsetY };\n        };\n        return DataTransfer;\n    }());\n    DragDropTouch_1.DataTransfer = DataTransfer;\n    /**\n     * Defines a class that adds support for touch-based HTML5 drag/drop operations.\n     *\n     * The @see:DragDropTouch class listens to touch events and raises the\n     * appropriate HTML5 drag/drop events as if the events had been caused\n     * by mouse actions.\n     *\n     * The purpose of this class is to enable using existing, standard HTML5\n     * drag/drop code on mobile devices running IOS or Android.\n     *\n     * To use, include the DragDropTouch.js file on the page. The class will\n     * automatically start monitoring touch events and will raise the HTML5\n     * drag drop events (dragstart, dragenter, dragleave, drop, dragend) which\n     * should be handled by the application.\n     *\n     * For details and examples on HTML drag and drop, see\n     * https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Drag_operations.\n     */\n    var DragDropTouch = (function () {\n        /**\n         * Initializes the single instance of the @see:DragDropTouch class.\n         */\n        function DragDropTouch() {\n            this._lastClick = 0;\n            // enforce singleton pattern\n            if (DragDropTouch._instance) {\n                throw 'DragDropTouch instance already created.';\n            }\n            // detect passive event support\n            // https://github.com/Modernizr/Modernizr/issues/1894\n            var supportsPassive = false;\n            document.addEventListener('test', function () { }, {\n                get passive() {\n                    supportsPassive = true;\n                    return true;\n                }\n            });\n            // listen to touch events\n            if (navigator.maxTouchPoints) {\n                var d = document, \n                    ts = this._touchstart.bind(this), \n                    tm = this._touchmove.bind(this), \n                    te = this._touchend.bind(this), \n                    opt = supportsPassive ? { passive: false, capture: false } : false;\n                d.addEventListener('touchstart', ts, opt);\n                d.addEventListener('touchmove', tm, opt);\n                d.addEventListener('touchend', te);\n                d.addEventListener('touchcancel', te);\n            }\n        }\n        /**\n         * Gets a reference to the @see:DragDropTouch singleton.\n         */\n        DragDropTouch.getInstance = function () {\n            return DragDropTouch._instance;\n        };\n        // ** event handlers\n        DragDropTouch.prototype._touchstart = function (e) {\n            var _this = this;\n            if (this._shouldHandle(e)) {\n                // raise double-click and prevent zooming\n                if (Date.now() - this._lastClick < DragDropTouch._DBLCLICK) {\n                    if (this._dispatchEvent(e, 'dblclick', e.target)) {\n                        e.preventDefault();\n                        this._reset();\n                        return;\n                    }\n                }\n                // clear all variables\n                this._reset();\n                // get nearest draggable element\n                var src = this._closestDraggable(e.target);\n                if (src) {\n                    // give caller a chance to handle the hover/move events\n                    if (!this._dispatchEvent(e, 'mousemove', e.target) &&\n                        !this._dispatchEvent(e, 'mousedown', e.target)) {\n                        // get ready to start dragging\n                        this._dragSource = src;\n                        this._ptDown = this._getPoint(e);\n                        this._lastTouch = e;\n                        e.preventDefault();\n                        // show context menu if the user hasn't started dragging after a while\n                        setTimeout(function () {\n                            if (_this._dragSource == src && _this._img == null) {\n                                if (_this._dispatchEvent(e, 'contextmenu', src)) {\n                                    _this._reset();\n                                }\n                            }\n                        }, DragDropTouch._CTXMENU);\n                        if (DragDropTouch._ISPRESSHOLDMODE) {\n                            this._pressHoldInterval = setTimeout(function () {\n                                _this._isDragEnabled = true;\n                                _this._touchmove(e);\n                            }, DragDropTouch._PRESSHOLDAWAIT);\n                        }\n                    }\n                }\n            }\n        };\n        DragDropTouch.prototype._touchmove = function (e) {\n            if (this._shouldCancelPressHoldMove(e)) {\n              this._reset();\n              return;\n            }\n            if (this._shouldHandleMove(e) || this._shouldHandlePressHoldMove(e)) {\n                // see if target wants to handle move\n                var target = this._getTarget(e);\n                if (this._dispatchEvent(e, 'mousemove', target)) {\n                    this._lastTouch = e;\n                    e.preventDefault();\n                    return;\n                }\n                // start dragging\n                if (this._dragSource && !this._img && this._shouldStartDragging(e)) {\n                    this._dispatchEvent(e, 'dragstart', this._dragSource);\n                    this._createImage(e);\n                    this._dispatchEvent(e, 'dragenter', target);\n                }\n                // continue dragging\n                if (this._img) {\n                    this._lastTouch = e;\n                    e.preventDefault(); // prevent scrolling\n                    this._dispatchEvent(e, 'drag', this._dragSource);\n                    if (target != this._lastTarget) {\n                        this._dispatchEvent(this._lastTouch, 'dragleave', this._lastTarget);\n                        this._dispatchEvent(e, 'dragenter', target);\n                        this._lastTarget = target;\n                    }\n                    this._moveImage(e);\n                    this._isDropZone = this._dispatchEvent(e, 'dragover', target);\n                }\n            }\n        };\n        DragDropTouch.prototype._touchend = function (e) {\n            if (this._shouldHandle(e)) {\n                // see if target wants to handle up\n                if (this._dispatchEvent(this._lastTouch, 'mouseup', e.target)) {\n                    e.preventDefault();\n                    return;\n                }\n                // user clicked the element but didn't drag, so clear the source and simulate a click\n                if (!this._img) {\n                    this._dragSource = null;\n                    this._dispatchEvent(this._lastTouch, 'click', e.target);\n                    this._lastClick = Date.now();\n                }\n                // finish dragging\n                this._destroyImage();\n                if (this._dragSource) {\n                    if (e.type.indexOf('cancel') < 0 && this._isDropZone) {\n                        this._dispatchEvent(this._lastTouch, 'drop', this._lastTarget);\n                    }\n                    this._dispatchEvent(this._lastTouch, 'dragend', this._dragSource);\n                    this._reset();\n                }\n            }\n        };\n        // ** utilities\n        // ignore events that have been handled or that involve more than one touch\n        DragDropTouch.prototype._shouldHandle = function (e) {\n            return e &&\n                !e.defaultPrevented &&\n                e.touches && e.touches.length < 2;\n        };\n\n        // use regular condition outside of press & hold mode\n        DragDropTouch.prototype._shouldHandleMove = function (e) {\n          return !DragDropTouch._ISPRESSHOLDMODE && this._shouldHandle(e);\n        };\n\n        // allow to handle moves that involve many touches for press & hold\n        DragDropTouch.prototype._shouldHandlePressHoldMove = function (e) {\n          return DragDropTouch._ISPRESSHOLDMODE &&\n              this._isDragEnabled && e && e.touches && e.touches.length;\n        };\n\n        // reset data if user drags without pressing & holding\n        DragDropTouch.prototype._shouldCancelPressHoldMove = function (e) {\n          return DragDropTouch._ISPRESSHOLDMODE && !this._isDragEnabled &&\n              this._getDelta(e) > DragDropTouch._PRESSHOLDMARGIN;\n        };\n\n        // start dragging when specified delta is detected\n        DragDropTouch.prototype._shouldStartDragging = function (e) {\n            var delta = this._getDelta(e);\n            return delta > DragDropTouch._THRESHOLD ||\n                (DragDropTouch._ISPRESSHOLDMODE && delta >= DragDropTouch._PRESSHOLDTHRESHOLD);\n        }\n\n        // clear all members\n        DragDropTouch.prototype._reset = function () {\n            this._destroyImage();\n            this._dragSource = null;\n            this._lastTouch = null;\n            this._lastTarget = null;\n            this._ptDown = null;\n            this._isDragEnabled = false;\n            this._isDropZone = false;\n            this._dataTransfer = new DataTransfer();\n            clearInterval(this._pressHoldInterval);\n        };\n        // get point for a touch event\n        DragDropTouch.prototype._getPoint = function (e, page) {\n            if (e && e.touches) {\n                e = e.touches[0];\n            }\n            return { x: page ? e.pageX : e.clientX, y: page ? e.pageY : e.clientY };\n        };\n        // get distance between the current touch event and the first one\n        DragDropTouch.prototype._getDelta = function (e) {\n            if (DragDropTouch._ISPRESSHOLDMODE && !this._ptDown) { return 0; }\n            var p = this._getPoint(e);\n            return Math.abs(p.x - this._ptDown.x) + Math.abs(p.y - this._ptDown.y);\n        };\n        // get the element at a given touch event\n        DragDropTouch.prototype._getTarget = function (e) {\n            var pt = this._getPoint(e), el = document.elementFromPoint(pt.x, pt.y);\n            while (el && getComputedStyle(el).pointerEvents == 'none') {\n                el = el.parentElement;\n            }\n            return el;\n        };\n        // create drag image from source element\n        DragDropTouch.prototype._createImage = function (e) {\n            // just in case...\n            if (this._img) {\n                this._destroyImage();\n            }\n            // create drag image from custom element or drag source\n            var src = this._imgCustom || this._dragSource;\n            this._img = src.cloneNode(true);\n            this._copyStyle(src, this._img);\n            this._img.style.top = this._img.style.left = '-9999px';\n            // if creating from drag source, apply offset and opacity\n            if (!this._imgCustom) {\n                var rc = src.getBoundingClientRect(), pt = this._getPoint(e);\n                this._imgOffset = { x: pt.x - rc.left, y: pt.y - rc.top };\n                this._img.style.opacity = DragDropTouch._OPACITY.toString();\n            }\n            // add image to document\n            this._moveImage(e);\n            document.body.appendChild(this._img);\n        };\n        // dispose of drag image element\n        DragDropTouch.prototype._destroyImage = function () {\n            if (this._img && this._img.parentElement) {\n                this._img.parentElement.removeChild(this._img);\n            }\n            this._img = null;\n            this._imgCustom = null;\n        };\n        // move the drag image element\n        DragDropTouch.prototype._moveImage = function (e) {\n            var _this = this;\n            requestAnimationFrame(function () {\n                if (_this._img) {\n                    var pt = _this._getPoint(e, true), s = _this._img.style;\n                    s.position = 'absolute';\n                    s.pointerEvents = 'none';\n                    s.zIndex = '999999';\n                    s.left = Math.round(pt.x - _this._imgOffset.x) + 'px';\n                    s.top = Math.round(pt.y - _this._imgOffset.y) + 'px';\n                }\n            });\n        };\n        // copy properties from an object to another\n        DragDropTouch.prototype._copyProps = function (dst, src, props) {\n            for (var i = 0; i < props.length; i++) {\n                var p = props[i];\n                dst[p] = src[p];\n            }\n        };\n        DragDropTouch.prototype._copyStyle = function (src, dst) {\n            // remove potentially troublesome attributes\n            DragDropTouch._rmvAtts.forEach(function (att) {\n                dst.removeAttribute(att);\n            });\n            // copy canvas content\n            if (src instanceof HTMLCanvasElement) {\n                var cSrc = src, cDst = dst;\n                cDst.width = cSrc.width;\n                cDst.height = cSrc.height;\n                cDst.getContext('2d').drawImage(cSrc, 0, 0);\n            }\n            // copy style (without transitions)\n            var cs = getComputedStyle(src);\n            for (var i = 0; i < cs.length; i++) {\n                var key = cs[i];\n                if (key.indexOf('transition') < 0) {\n                    dst.style[key] = cs[key];\n                }\n            }\n            dst.style.pointerEvents = 'none';\n            // and repeat for all children\n            for (var i = 0; i < src.children.length; i++) {\n                this._copyStyle(src.children[i], dst.children[i]);\n            }\n        };\n        DragDropTouch.prototype._dispatchEvent = function (e, type, target) {\n            if (e && target) {\n                var evt = document.createEvent('Event'), t = e.touches ? e.touches[0] : e;\n                evt.initEvent(type, true, true);\n                evt.button = 0;\n                evt.which = evt.buttons = 1;\n                this._copyProps(evt, e, DragDropTouch._kbdProps);\n                this._copyProps(evt, t, DragDropTouch._ptProps);\n                evt.dataTransfer = this._dataTransfer;\n                target.dispatchEvent(evt);\n                return evt.defaultPrevented;\n            }\n            return false;\n        };\n        // gets an element's closest draggable ancestor\n        DragDropTouch.prototype._closestDraggable = function (e) {\n            for (; e; e = e.parentElement) {\n                if (e.hasAttribute('draggable') && e.draggable) {\n                    return e;\n                }\n            }\n            return null;\n        };\n        return DragDropTouch;\n    }());\n    /*private*/ DragDropTouch._instance = new DragDropTouch(); // singleton\n    // constants\n    DragDropTouch._THRESHOLD = 5; // pixels to move before drag starts\n    DragDropTouch._OPACITY = 0.5; // drag image opacity\n    DragDropTouch._DBLCLICK = 500; // max ms between clicks in a double click\n    DragDropTouch._CTXMENU = 900; // ms to hold before raising 'contextmenu' event\n    DragDropTouch._ISPRESSHOLDMODE = false; // decides of press & hold mode presence\n    DragDropTouch._PRESSHOLDAWAIT = 400; // ms to wait before press & hold is detected\n    DragDropTouch._PRESSHOLDMARGIN = 25; // pixels that finger might shiver while pressing\n    DragDropTouch._PRESSHOLDTHRESHOLD = 0; // pixels to move before drag starts\n    // copy styles/attributes from drag source to drag image element\n    DragDropTouch._rmvAtts = 'id,class,style,draggable'.split(',');\n    // synthesize and dispatch an event\n    // returns true if the event has been handled (e.preventDefault == true)\n    DragDropTouch._kbdProps = 'altKey,ctrlKey,metaKey,shiftKey'.split(',');\n    DragDropTouch._ptProps = 'pageX,pageY,clientX,clientY,screenX,screenY,offsetX,offsetY'.split(',');\n    DragDropTouch_1.DragDropTouch = DragDropTouch;\n})(DragDropTouch || (DragDropTouch = {}));"]}